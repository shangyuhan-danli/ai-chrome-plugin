import{d as H,f as P,o as n,c as i,b as e,F as b,r as w,n as S,t as r,g as c,h as u,v as M,i as B,a as T,j as _,k as E,l as v,_ as j,e as z}from"./chunks/_plugin-vue_export-helper-C6Ao9Pha.js";const O={class:"options-container"},U={class:"sidebar"},K={class:"sidebar-nav"},D=["onClick"],L=["innerHTML"],$={class:"main-content"},F={key:0,class:"content-section"},q={class:"sessions-list"},J={key:0,class:"empty-state"},Q={class:"session-info"},W={class:"session-actions"},X=["onClick"],Y=["onClick"],Z={key:1,class:"content-section"},R={class:"form-section"},ee={class:"form-group"},se={class:"form-group"},te={class:"form-group"},oe={key:2,class:"content-section"},ae={class:"form-section"},le={class:"form-group"},ne={class:"radio-group"},ie={class:"radio-option"},de={class:"radio-option"},re={class:"form-group"},ue={class:"checkbox-label"},pe={class:"form-group"},ce={class:"checkbox-label"},ve={key:3,class:"content-section"},ye={class:"about-content"},me={class:"about-stats"},ke={class:"stat-card"},fe={class:"stat-value"},he={class:"stat-card"},ge={class:"stat-value"},be=H({__name:"App",setup(Se){const p=v("sessions"),A=[{id:"sessions",label:"会话管理",icon:'<path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>'},{id:"api",label:"API 配置",icon:'<circle cx="12" cy="12" r="3" stroke-width="2"/><path d="M12 1v6m0 6v6M1 12h6m6 0h6" stroke-width="2" stroke-linecap="round"/>'},{id:"general",label:"通用设置",icon:'<path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>'},{id:"about",label:"关于",icon:'<circle cx="12" cy="12" r="10" stroke-width="2"/><line x1="12" y1="16" x2="12" y2="12" stroke-width="2" stroke-linecap="round"/><line x1="12" y1="8" x2="12.01" y2="8" stroke-width="2" stroke-linecap="round"/>'}],y=v([]),f=v(0),a=v({endpoint:"",apiKey:"",model:"gpt-3.5-turbo"}),l=v({displayMode:"float",autoOpen:!1,saveHistory:!0}),m=v(null);P(async()=>{await h(),await I()});const h=async()=>{var o;try{const s=await chrome.runtime.sendMessage({type:"GET_SESSIONS"});if(s!=null&&s.success){y.value=s.data||[];let t=0;for(const d of y.value){const k=await chrome.runtime.sendMessage({type:"GET_MESSAGES",payload:{sessionId:d.id}});k!=null&&k.success&&(t+=((o=k.data)==null?void 0:o.length)||0)}f.value=t}}catch(s){console.error("加载会话失败:",s)}},I=async()=>{try{const o=await chrome.runtime.sendMessage({type:"GET_SETTING",payload:{key:"displayMode"}});o!=null&&o.success&&o.data&&(l.value.displayMode=o.data);const s=await chrome.runtime.sendMessage({type:"GET_SETTING",payload:{key:"apiKey"}});s!=null&&s.success&&s.data&&(a.value.apiKey=s.data);const t=await chrome.runtime.sendMessage({type:"GET_SETTING",payload:{key:"apiEndpoint"}});t!=null&&t.success&&t.data&&(a.value.endpoint=t.data);const d=await chrome.runtime.sendMessage({type:"GET_SETTING",payload:{key:"model"}});d!=null&&d.success&&d.data&&(a.value.model=d.data)}catch(o){console.error("加载设置失败:",o)}},C=async o=>{alert(`查看会话 ${o} 的功能待实现`)},V=async o=>{if(confirm("确定要删除这个会话吗？"))try{await chrome.runtime.sendMessage({type:"DELETE_SESSION",payload:{sessionId:o}}),await h()}catch(s){console.error("删除会话失败:",s)}},x=async()=>{try{await chrome.runtime.sendMessage({type:"SAVE_SETTING",payload:{key:"apiKey",value:a.value.apiKey}}),await chrome.runtime.sendMessage({type:"SAVE_SETTING",payload:{key:"apiEndpoint",value:a.value.endpoint}}),await chrome.runtime.sendMessage({type:"SAVE_SETTING",payload:{key:"model",value:a.value.model}}),alert("API 设置已保存")}catch(o){console.error("保存 API 设置失败:",o)}},G=async()=>{m.value={success:!0,message:"连接测试功能待实现"},setTimeout(()=>{m.value=null},3e3)},N=async()=>{try{await chrome.runtime.sendMessage({type:"SAVE_SETTING",payload:{key:"displayMode",value:l.value.displayMode}}),await chrome.runtime.sendMessage({type:"SAVE_SETTING",payload:{key:"autoOpen",value:l.value.autoOpen}}),await chrome.runtime.sendMessage({type:"SAVE_SETTING",payload:{key:"saveHistory",value:l.value.saveHistory}}),alert("通用设置已保存")}catch(o){console.error("保存通用设置失败:",o)}},g=o=>new Date(o).toLocaleString("zh-CN");return(o,s)=>(n(),i("div",O,[e("div",U,[s[7]||(s[7]=e("div",{class:"sidebar-header"},[e("div",{class:"logo"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])]),e("h1",null,"AI Chat Assistant"),e("p",null,"设置与管理")],-1)),e("nav",K,[(n(),i(b,null,w(A,t=>e("a",{key:t.id,class:S(["nav-item",{active:p.value===t.id}]),onClick:d=>p.value=t.id},[(n(),i("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",innerHTML:t.icon},null,8,L)),e("span",null,r(t.label),1)],10,D)),64))])]),e("div",$,[p.value==="sessions"?(n(),i("div",F,[s[11]||(s[11]=e("div",{class:"section-header"},[e("h2",null,"会话管理")],-1)),e("div",q,[y.value.length===0?(n(),i("div",J,[...s[8]||(s[8]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),e("p",null,"暂无会话记录",-1)])])):c("",!0),(n(!0),i(b,null,w(y.value,t=>(n(),i("div",{key:t.id,class:"session-card"},[e("div",Q,[e("h3",null,r(t.title),1),e("p",null,"创建时间: "+r(g(t.createdAt)),1),e("p",null,"更新时间: "+r(g(t.updatedAt)),1)]),e("div",W,[e("button",{class:"btn-icon",onClick:d=>C(t.id),title:"查看"},[...s[9]||(s[9]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z","stroke-width":"2"}),e("circle",{cx:"12",cy:"12",r:"3","stroke-width":"2"})],-1)])],8,X),e("button",{class:"btn-icon",onClick:d=>V(t.id),title:"删除"},[...s[10]||(s[10]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("polyline",{points:"3 6 5 6 21 6","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])],8,Y)])]))),128))])])):c("",!0),p.value==="api"?(n(),i("div",Z,[s[18]||(s[18]=e("div",{class:"section-header"},[e("h2",null,"API 配置")],-1)),e("div",R,[e("div",ee,[s[12]||(s[12]=e("label",null,"API 端点",-1)),u(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=t=>a.value.endpoint=t),placeholder:"https://api.openai.com/v1/chat/completions",class:"form-input"},null,512),[[M,a.value.endpoint]]),s[13]||(s[13]=e("p",{class:"form-hint"},"输入你的 AI API 端点地址",-1))]),e("div",se,[s[14]||(s[14]=e("label",null,"API 密钥",-1)),u(e("input",{type:"password","onUpdate:modelValue":s[1]||(s[1]=t=>a.value.apiKey=t),placeholder:"sk-...",class:"form-input"},null,512),[[M,a.value.apiKey]]),s[15]||(s[15]=e("p",{class:"form-hint"},"你的 API 密钥将被安全存储",-1))]),e("div",te,[s[17]||(s[17]=e("label",null,"模型",-1)),u(e("select",{"onUpdate:modelValue":s[2]||(s[2]=t=>a.value.model=t),class:"form-select"},[...s[16]||(s[16]=[T('<option value="gpt-3.5-turbo" data-v-ef71fd63>GPT-3.5 Turbo</option><option value="gpt-4" data-v-ef71fd63>GPT-4</option><option value="gpt-4-turbo" data-v-ef71fd63>GPT-4 Turbo</option><option value="claude-3-sonnet" data-v-ef71fd63>Claude 3 Sonnet</option><option value="claude-3-opus" data-v-ef71fd63>Claude 3 Opus</option>',5)])],512),[[B,a.value.model]])]),e("div",{class:"form-actions"},[e("button",{class:"btn-primary",onClick:x},"保存设置"),e("button",{class:"btn-secondary",onClick:G},"测试连接")]),m.value?(n(),i("div",{key:0,class:S(["alert",m.value.success?"alert-success":"alert-error"])},r(m.value.message),3)):c("",!0)])])):c("",!0),p.value==="general"?(n(),i("div",oe,[s[24]||(s[24]=e("div",{class:"section-header"},[e("h2",null,"通用设置")],-1)),e("div",ae,[e("div",le,[s[21]||(s[21]=e("label",null,"默认显示模式",-1)),e("div",ne,[e("label",ie,[u(e("input",{type:"radio",value:"float","onUpdate:modelValue":s[3]||(s[3]=t=>l.value.displayMode=t)},null,512),[[_,l.value.displayMode]]),s[19]||(s[19]=e("span",null,"悬浮窗口",-1))]),e("label",de,[u(e("input",{type:"radio",value:"sidebar","onUpdate:modelValue":s[4]||(s[4]=t=>l.value.displayMode=t)},null,512),[[_,l.value.displayMode]]),s[20]||(s[20]=e("span",null,"侧边栏",-1))])])]),e("div",re,[e("label",ue,[u(e("input",{type:"checkbox","onUpdate:modelValue":s[5]||(s[5]=t=>l.value.autoOpen=t)},null,512),[[E,l.value.autoOpen]]),s[22]||(s[22]=e("span",null,"页面加载时自动打开聊天窗口",-1))])]),e("div",pe,[e("label",ce,[u(e("input",{type:"checkbox","onUpdate:modelValue":s[6]||(s[6]=t=>l.value.saveHistory=t)},null,512),[[E,l.value.saveHistory]]),s[23]||(s[23]=e("span",null,"保存聊天历史记录",-1))])]),e("div",{class:"form-actions"},[e("button",{class:"btn-primary",onClick:N},"保存设置")])])])):c("",!0),p.value==="about"?(n(),i("div",ve,[s[29]||(s[29]=e("div",{class:"section-header"},[e("h2",null,"关于")],-1)),e("div",ye,[s[27]||(s[27]=T('<div class="about-logo" data-v-ef71fd63><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" data-v-ef71fd63><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-ef71fd63></path></svg></div><h3 data-v-ef71fd63>AI Chat Assistant</h3><p class="version" data-v-ef71fd63>版本 1.0.0</p><p class="description" data-v-ef71fd63> 一个基于 Vue3 + TypeScript 的浏览器 AI 聊天助手插件， 支持悬浮窗口和侧边栏两种显示模式，提供智能对话功能。 </p>',4)),e("div",me,[e("div",ke,[e("div",fe,r(y.value.length),1),s[25]||(s[25]=e("div",{class:"stat-label"},"总会话数",-1))]),e("div",he,[e("div",ge,r(f.value),1),s[26]||(s[26]=e("div",{class:"stat-label"},"总消息数",-1))])]),s[28]||(s[28]=e("div",{class:"about-links"},[e("a",{href:"#",class:"link-btn"},"使用文档"),e("a",{href:"#",class:"link-btn"},"反馈问题"),e("a",{href:"#",class:"link-btn"},"开源地址")],-1))])])):c("",!0)])]))}}),we=j(be,[["__scopeId","data-v-ef71fd63"]]);z(we).mount("#app");

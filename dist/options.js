import{d as K,f as L,o as l,c as n,b as e,F as b,r as M,n as f,t as d,g as c,w as $,h as v,v as S,i as q,a as I,j as G,k as V,l as p,_ as F,e as Q}from"./chunks/_plugin-vue_export-helper-BVLuoGCU.js";const Y={class:"options-container"},J={class:"sidebar"},X={class:"sidebar-nav"},W=["onClick"],Z=["innerHTML"],R={class:"main-content"},ee={key:0,class:"content-section"},te={class:"sessions-list"},se={key:0,class:"empty-state"},oe={class:"session-info"},ae={class:"session-actions"},le=["onClick"],ne=["onClick"],ie={class:"modal-container"},de={class:"modal-header"},re={class:"modal-body"},ue={key:0,class:"modal-empty"},ce={key:1,class:"messages-list"},pe={class:"message-role"},ve={class:"message-content"},ye={key:0,class:"think-block"},me={class:"think-content"},ke={key:0,class:"text-block"},he={key:1,class:"tool-block"},ge={class:"tool-header"},be={class:"tool-name"},fe={class:"tool-params"},_e={key:2,class:"text-block"},Me={class:"message-time"},Se={key:2,class:"content-section"},we={class:"form-section"},Te={class:"form-group"},Ee={class:"form-group"},Ae={class:"form-group"},Ce={key:0,class:"form-group"},xe={key:3,class:"content-section"},Ie={class:"form-section"},Ge={class:"form-group"},Ve={class:"radio-group"},Ne={class:"radio-option"},De={class:"radio-option"},Pe={class:"form-group"},He={class:"checkbox-label"},Oe={class:"form-group"},Be={class:"checkbox-label"},je={class:"form-group"},Ue={class:"retention-setting"},ze={key:0,class:f(["alert","alert-success"])},Ke={key:4,class:"content-section"},Le={class:"about-content"},$e={class:"about-stats"},qe={class:"stat-card"},Fe={class:"stat-value"},Qe={class:"stat-card"},Ye={class:"stat-value"},Je=K({__name:"App",setup(We){const y=p("sessions"),N=[{id:"sessions",label:"ä¼šè¯ç®¡ç†",icon:'<path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>'},{id:"api",label:"API é…ç½®",icon:'<circle cx="12" cy="12" r="3" stroke-width="2"/><path d="M12 1v6m0 6v6M1 12h6m6 0h6" stroke-width="2" stroke-linecap="round"/>'},{id:"general",label:"é€šç”¨è®¾ç½®",icon:'<path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>'},{id:"about",label:"å…³äº",icon:'<circle cx="12" cy="12" r="10" stroke-width="2"/><line x1="12" y1="16" x2="12" y2="12" stroke-width="2" stroke-linecap="round"/><line x1="12" y1="8" x2="12.01" y2="8" stroke-width="2" stroke-linecap="round"/>'}],m=p([]),C=p(0),w=p(!1),T=p(null),h=p([]),i=p({endpoint:"",apiKey:"",model:"gpt-3.5-turbo",customModel:""}),D=()=>{i.value.model!=="custom"&&(i.value.customModel="")},r=p({displayMode:"float",autoOpen:!1,saveHistory:!0,retentionDays:90}),g=p(null),_=p(null);L(async()=>{await E(),await P()});const E=async()=>{var o;try{const t=await chrome.runtime.sendMessage({type:"GET_SESSIONS"});if(t!=null&&t.success){m.value=t.data||[];let u=0;for(const s of m.value){const a=await chrome.runtime.sendMessage({type:"GET_MESSAGES",payload:{sessionId:s.id}});a!=null&&a.success&&(u+=((o=a.data)==null?void 0:o.length)||0)}C.value=u}}catch(t){console.error("åŠ è½½ä¼šè¯å¤±è´¥:",t)}},P=async()=>{try{const o=await chrome.runtime.sendMessage({type:"GET_SETTING",payload:{key:"displayMode"}});o!=null&&o.success&&o.data&&(r.value.displayMode=o.data);const t=await chrome.runtime.sendMessage({type:"GET_RETENTION_DAYS"});t!=null&&t.success&&t.data&&(r.value.retentionDays=t.data);const u=await chrome.runtime.sendMessage({type:"GET_SETTING",payload:{key:"apiKey"}});u!=null&&u.success&&u.data&&(i.value.apiKey=u.data);const s=await chrome.runtime.sendMessage({type:"GET_SETTING",payload:{key:"apiEndpoint"}});s!=null&&s.success&&s.data&&(i.value.endpoint=s.data);const a=await chrome.runtime.sendMessage({type:"GET_SETTING",payload:{key:"model"}}),k=await chrome.runtime.sendMessage({type:"GET_SETTING",payload:{key:"isCustomModel"}});a!=null&&a.success&&a.data&&(k!=null&&k.success&&k.data?(i.value.model="custom",i.value.customModel=a.data):["gpt-3.5-turbo","gpt-4","gpt-4-turbo","gpt-4o","gpt-4o-mini","claude-3-sonnet","claude-3-opus","claude-3-haiku","claude-3.5-sonnet","deepseek-chat","deepseek-coder","qwen-turbo","qwen-plus"].includes(a.data)?i.value.model=a.data:(i.value.model="custom",i.value.customModel=a.data))}catch(o){console.error("åŠ è½½è®¾ç½®å¤±è´¥:",o)}},H=async o=>{try{T.value=m.value.find(u=>u.id===o);const t=await chrome.runtime.sendMessage({type:"GET_MESSAGES",payload:{sessionId:o}});t!=null&&t.success?h.value=t.data||[]:h.value=[],w.value=!0}catch(t){console.error("åŠ è½½ä¼šè¯æ¶ˆæ¯å¤±è´¥:",t),alert("åŠ è½½ä¼šè¯æ¶ˆæ¯å¤±è´¥")}},x=()=>{w.value=!1,T.value=null,h.value=[]},O=async o=>{if(confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªä¼šè¯å—ï¼Ÿ"))try{await chrome.runtime.sendMessage({type:"DELETE_SESSION",payload:{sessionId:o}}),await E()}catch(t){console.error("åˆ é™¤ä¼šè¯å¤±è´¥:",t)}},B=async()=>{try{await chrome.runtime.sendMessage({type:"SAVE_SETTING",payload:{key:"apiKey",value:i.value.apiKey}}),await chrome.runtime.sendMessage({type:"SAVE_SETTING",payload:{key:"apiEndpoint",value:i.value.endpoint}});const o=i.value.model==="custom"?i.value.customModel:i.value.model;await chrome.runtime.sendMessage({type:"SAVE_SETTING",payload:{key:"model",value:o}}),await chrome.runtime.sendMessage({type:"SAVE_SETTING",payload:{key:"isCustomModel",value:i.value.model==="custom"}}),alert("API è®¾ç½®å·²ä¿å­˜")}catch(o){console.error("ä¿å­˜ API è®¾ç½®å¤±è´¥:",o)}},j=async()=>{g.value={success:!0,message:"è¿æ¥æµ‹è¯•åŠŸèƒ½å¾…å®ç°"},setTimeout(()=>{g.value=null},3e3)},U=async()=>{try{await chrome.runtime.sendMessage({type:"SAVE_SETTING",payload:{key:"displayMode",value:r.value.displayMode}}),await chrome.runtime.sendMessage({type:"SAVE_SETTING",payload:{key:"autoOpen",value:r.value.autoOpen}}),await chrome.runtime.sendMessage({type:"SAVE_SETTING",payload:{key:"saveHistory",value:r.value.saveHistory}}),await chrome.runtime.sendMessage({type:"SET_RETENTION_DAYS",payload:{days:r.value.retentionDays}}),alert("é€šç”¨è®¾ç½®å·²ä¿å­˜")}catch(o){console.error("ä¿å­˜é€šç”¨è®¾ç½®å¤±è´¥:",o)}},z=async()=>{try{const o=await chrome.runtime.sendMessage({type:"CLEAN_EXPIRED_SESSIONS"});if(o!=null&&o.success){const{deletedSessions:t,deletedMessages:u}=o.data;_.value=`å·²æ¸…ç† ${t} ä¸ªè¿‡æœŸä¼šè¯ï¼Œ${u} æ¡æ¶ˆæ¯`,await E(),setTimeout(()=>{_.value=null},5e3)}}catch(o){console.error("æ¸…ç†è¿‡æœŸæ•°æ®å¤±è´¥:",o)}},A=o=>new Date(o).toLocaleString("zh-CN");return(o,t)=>{var u;return l(),n("div",Y,[e("div",J,[t[9]||(t[9]=e("div",{class:"sidebar-header"},[e("div",{class:"logo"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])]),e("h1",null,"AI Chat Assistant"),e("p",null,"è®¾ç½®ä¸ç®¡ç†")],-1)),e("nav",X,[(l(),n(b,null,M(N,s=>e("a",{key:s.id,class:f(["nav-item",{active:y.value===s.id}]),onClick:a=>y.value=s.id},[(l(),n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",innerHTML:s.icon},null,8,Z)),e("span",null,d(s.label),1)],10,W)),64))])]),e("div",R,[y.value==="sessions"?(l(),n("div",ee,[t[13]||(t[13]=e("div",{class:"section-header"},[e("h2",null,"ä¼šè¯ç®¡ç†")],-1)),e("div",te,[m.value.length===0?(l(),n("div",se,[...t[10]||(t[10]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),e("p",null,"æš‚æ— ä¼šè¯è®°å½•",-1)])])):c("",!0),(l(!0),n(b,null,M(m.value,s=>(l(),n("div",{key:s.id,class:"session-card"},[e("div",oe,[e("h3",null,d(s.title),1),e("p",null,"åˆ›å»ºæ—¶é—´: "+d(A(s.createdAt)),1),e("p",null,"æ›´æ–°æ—¶é—´: "+d(A(s.updatedAt)),1)]),e("div",ae,[e("button",{class:"btn-icon",onClick:a=>H(s.id),title:"æŸ¥çœ‹"},[...t[11]||(t[11]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z","stroke-width":"2"}),e("circle",{cx:"12",cy:"12",r:"3","stroke-width":"2"})],-1)])],8,le),e("button",{class:"btn-icon",onClick:a=>O(s.id),title:"åˆ é™¤"},[...t[12]||(t[12]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("polyline",{points:"3 6 5 6 21 6","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])],8,ne)])]))),128))])])):c("",!0),w.value?(l(),n("div",{key:1,class:"modal-overlay",onClick:$(x,["self"])},[e("div",ie,[e("div",de,[e("h3",null,d(((u=T.value)==null?void 0:u.title)||"ä¼šè¯è¯¦æƒ…"),1),e("button",{class:"modal-close",onClick:x},[...t[14]||(t[14]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18","stroke-width":"2","stroke-linecap":"round"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18","stroke-width":"2","stroke-linecap":"round"})],-1)])])]),e("div",re,[h.value.length===0?(l(),n("div",ue," æš‚æ— æ¶ˆæ¯è®°å½• ")):(l(),n("div",ce,[(l(!0),n(b,null,M(h.value,s=>(l(),n("div",{key:s.id||s.createdAt,class:f(["message-item",s.role])},[e("div",pe,d(s.role==="user"?"ç”¨æˆ·":"AI"),1),e("div",ve,[s.think?(l(),n("div",ye,[t[15]||(t[15]=e("div",{class:"think-header"},[e("span",{class:"think-icon"},"ğŸ’­"),e("span",{class:"think-label"},"æ€è€ƒè¿‡ç¨‹")],-1)),e("div",me,d(s.think),1)])):c("",!0),s.blocks&&s.blocks.length>0?(l(!0),n(b,{key:1},M(s.blocks,(a,k)=>(l(),n(b,{key:k},[a.type==="text"?(l(),n("div",ke,d(a.text),1)):a.type==="tool_use"?(l(),n("div",he,[e("div",ge,[t[16]||(t[16]=e("span",{class:"tool-icon"},"âš™",-1)),e("span",be,d(a.name),1),a.status?(l(),n("span",{key:0,class:f(["tool-badge",a.status])},d(a.status==="approved"?"å·²æ‰¹å‡†":a.status==="rejected"?"å·²æ‹’ç»":"å¾…å¤„ç†"),3)):c("",!0)]),e("pre",fe,d(JSON.stringify(a.input,null,2)),1)])):c("",!0)],64))),128)):s.content?(l(),n("div",_e,d(s.content),1)):c("",!0)]),e("div",Me,d(A(s.createdAt)),1)],2))),128))]))])])])):c("",!0),y.value==="api"?(l(),n("div",Se,[t[26]||(t[26]=e("div",{class:"section-header"},[e("h2",null,"API é…ç½®")],-1)),e("div",we,[e("div",Te,[t[17]||(t[17]=e("label",null,"API ç«¯ç‚¹",-1)),v(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>i.value.endpoint=s),placeholder:"https://api.openai.com/v1/chat/completions",class:"form-input"},null,512),[[S,i.value.endpoint]]),t[18]||(t[18]=e("p",{class:"form-hint"},"è¾“å…¥ä½ çš„ AI API ç«¯ç‚¹åœ°å€",-1))]),e("div",Ee,[t[19]||(t[19]=e("label",null,"API å¯†é’¥",-1)),v(e("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=s=>i.value.apiKey=s),placeholder:"sk-...",class:"form-input"},null,512),[[S,i.value.apiKey]]),t[20]||(t[20]=e("p",{class:"form-hint"},"ä½ çš„ API å¯†é’¥å°†è¢«å®‰å…¨å­˜å‚¨",-1))]),e("div",Ae,[t[22]||(t[22]=e("label",null,"æ¨¡å‹",-1)),v(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>i.value.model=s),class:"form-select",onChange:D},[...t[21]||(t[21]=[I('<optgroup label="OpenAI" data-v-0eee7843><option value="gpt-3.5-turbo" data-v-0eee7843>GPT-3.5 Turbo</option><option value="gpt-4" data-v-0eee7843>GPT-4</option><option value="gpt-4-turbo" data-v-0eee7843>GPT-4 Turbo</option><option value="gpt-4o" data-v-0eee7843>GPT-4o</option><option value="gpt-4o-mini" data-v-0eee7843>GPT-4o Mini</option></optgroup><optgroup label="Anthropic" data-v-0eee7843><option value="claude-3-sonnet" data-v-0eee7843>Claude 3 Sonnet</option><option value="claude-3-opus" data-v-0eee7843>Claude 3 Opus</option><option value="claude-3-haiku" data-v-0eee7843>Claude 3 Haiku</option><option value="claude-3.5-sonnet" data-v-0eee7843>Claude 3.5 Sonnet</option></optgroup><optgroup label="å…¶ä»–" data-v-0eee7843><option value="deepseek-chat" data-v-0eee7843>DeepSeek Chat</option><option value="deepseek-coder" data-v-0eee7843>DeepSeek Coder</option><option value="qwen-turbo" data-v-0eee7843>Qwen Turbo</option><option value="qwen-plus" data-v-0eee7843>Qwen Plus</option><option value="custom" data-v-0eee7843>è‡ªå®šä¹‰æ¨¡å‹...</option></optgroup>',3)])],544),[[q,i.value.model]]),t[23]||(t[23]=e("p",{class:"form-hint"},"é€‰æ‹©è¦ä½¿ç”¨çš„ AI æ¨¡å‹",-1))]),i.value.model==="custom"?(l(),n("div",Ce,[t[24]||(t[24]=e("label",null,"è‡ªå®šä¹‰æ¨¡å‹åç§°",-1)),v(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=s=>i.value.customModel=s),placeholder:"è¾“å…¥æ¨¡å‹åç§°ï¼Œå¦‚ llama-3-70b",class:"form-input"},null,512),[[S,i.value.customModel]]),t[25]||(t[25]=e("p",{class:"form-hint"},"è¾“å…¥ä½ çš„è‡ªå®šä¹‰æ¨¡å‹æ ‡è¯†ç¬¦",-1))])):c("",!0),e("div",{class:"form-actions"},[e("button",{class:"btn-primary",onClick:B},"ä¿å­˜è®¾ç½®"),e("button",{class:"btn-secondary",onClick:j},"æµ‹è¯•è¿æ¥")]),g.value?(l(),n("div",{key:1,class:f(["alert",g.value.success?"alert-success":"alert-error"])},d(g.value.message),3)):c("",!0)])])):c("",!0),y.value==="general"?(l(),n("div",xe,[t[35]||(t[35]=e("div",{class:"section-header"},[e("h2",null,"é€šç”¨è®¾ç½®")],-1)),e("div",Ie,[e("div",Ge,[t[29]||(t[29]=e("label",null,"é»˜è®¤æ˜¾ç¤ºæ¨¡å¼",-1)),e("div",Ve,[e("label",Ne,[v(e("input",{type:"radio",value:"float","onUpdate:modelValue":t[4]||(t[4]=s=>r.value.displayMode=s)},null,512),[[G,r.value.displayMode]]),t[27]||(t[27]=e("span",null,"æ‚¬æµ®çª—å£",-1))]),e("label",De,[v(e("input",{type:"radio",value:"sidebar","onUpdate:modelValue":t[5]||(t[5]=s=>r.value.displayMode=s)},null,512),[[G,r.value.displayMode]]),t[28]||(t[28]=e("span",null,"ä¾§è¾¹æ ",-1))])])]),e("div",Pe,[e("label",He,[v(e("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=s=>r.value.autoOpen=s)},null,512),[[V,r.value.autoOpen]]),t[30]||(t[30]=e("span",null,"é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æ‰“å¼€èŠå¤©çª—å£",-1))])]),e("div",Oe,[e("label",Be,[v(e("input",{type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=s=>r.value.saveHistory=s)},null,512),[[V,r.value.saveHistory]]),t[31]||(t[31]=e("span",null,"ä¿å­˜èŠå¤©å†å²è®°å½•",-1))])]),e("div",je,[t[33]||(t[33]=e("label",null,"æ•°æ®ä¿ç•™æ—¶é—´",-1)),e("div",Ue,[v(e("input",{type:"number","onUpdate:modelValue":t[8]||(t[8]=s=>r.value.retentionDays=s),min:"1",max:"365",class:"form-input retention-input"},null,512),[[S,r.value.retentionDays,void 0,{number:!0}]]),t[32]||(t[32]=e("span",{class:"retention-unit"},"å¤©",-1))]),t[34]||(t[34]=e("p",{class:"form-hint"},"è¶…è¿‡æ­¤æ—¶é—´çš„ä¼šè¯å°†åœ¨æ’ä»¶å¯åŠ¨æ—¶è‡ªåŠ¨æ¸…ç†ï¼ˆ1-365å¤©ï¼‰",-1))]),e("div",{class:"form-actions"},[e("button",{class:"btn-primary",onClick:U},"ä¿å­˜è®¾ç½®"),e("button",{class:"btn-secondary",onClick:z},"ç«‹å³æ¸…ç†è¿‡æœŸæ•°æ®")]),_.value?(l(),n("div",ze,d(_.value),1)):c("",!0)])])):c("",!0),y.value==="about"?(l(),n("div",Ke,[t[40]||(t[40]=e("div",{class:"section-header"},[e("h2",null,"å…³äº")],-1)),e("div",Le,[t[38]||(t[38]=I('<div class="about-logo" data-v-0eee7843><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" data-v-0eee7843><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-0eee7843></path></svg></div><h3 data-v-0eee7843>AI Chat Assistant</h3><p class="version" data-v-0eee7843>ç‰ˆæœ¬ 1.0.0</p><p class="description" data-v-0eee7843> ä¸€ä¸ªåŸºäº Vue3 + TypeScript çš„æµè§ˆå™¨ AI èŠå¤©åŠ©æ‰‹æ’ä»¶ï¼Œ æ”¯æŒæ‚¬æµ®çª—å£å’Œä¾§è¾¹æ ä¸¤ç§æ˜¾ç¤ºæ¨¡å¼ï¼Œæä¾›æ™ºèƒ½å¯¹è¯åŠŸèƒ½ã€‚ </p>',4)),e("div",$e,[e("div",qe,[e("div",Fe,d(m.value.length),1),t[36]||(t[36]=e("div",{class:"stat-label"},"æ€»ä¼šè¯æ•°",-1))]),e("div",Qe,[e("div",Ye,d(C.value),1),t[37]||(t[37]=e("div",{class:"stat-label"},"æ€»æ¶ˆæ¯æ•°",-1))])]),t[39]||(t[39]=e("div",{class:"about-links"},[e("a",{href:"#",class:"link-btn"},"ä½¿ç”¨æ–‡æ¡£"),e("a",{href:"#",class:"link-btn"},"åé¦ˆé—®é¢˜"),e("a",{href:"#",class:"link-btn"},"å¼€æºåœ°å€")],-1))])])):c("",!0)])])}}}),Xe=F(Je,[["__scopeId","data-v-0eee7843"]]);Q(Xe).mount("#app");

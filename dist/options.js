import{d as U,f as D,o as l,c as n,b as e,F as b,r as g,n as f,t as d,g as c,w as K,h as v,v as S,i as L,a as x,j as I,k as G,l as p,_ as q,e as $}from"./chunks/_plugin-vue_export-helper-ByXR5g9Y.js";const F={class:"options-container"},Q={class:"sidebar"},J={class:"sidebar-nav"},W=["onClick"],X=["innerHTML"],Y={class:"main-content"},Z={key:0,class:"content-section"},R={class:"sessions-list"},ee={key:0,class:"empty-state"},te={class:"session-info"},se={class:"session-actions"},oe=["onClick"],ae=["onClick"],le={class:"modal-container"},ne={class:"modal-header"},ie={class:"modal-body"},de={key:0,class:"modal-empty"},re={key:1,class:"messages-list"},ue={class:"message-role"},ce={class:"message-content"},pe={key:0,class:"think-block"},ve={class:"think-content"},ye={key:0,class:"text-block"},me={key:1,class:"tool-block"},ke={class:"tool-header"},he={class:"tool-name"},be={class:"tool-params"},ge={key:2,class:"text-block"},fe={class:"message-time"},_e={key:2,class:"content-section"},Me={class:"form-section"},we={class:"form-group"},Se={class:"form-group"},Te={class:"form-group"},Ee={key:0,class:"form-group"},Ae={key:3,class:"content-section"},Ce={class:"form-section"},xe={class:"form-group"},Ie={class:"radio-group"},Ge={class:"radio-option"},Ve={class:"radio-option"},Ne={class:"form-group"},Pe={class:"checkbox-label"},He={class:"form-group"},Be={class:"checkbox-label"},Oe={key:4,class:"content-section"},je={class:"about-content"},ze={class:"about-stats"},Ue={class:"stat-card"},De={class:"stat-value"},Ke={class:"stat-card"},Le={class:"stat-value"},qe=U({__name:"App",setup(Fe){const y=p("sessions"),V=[{id:"sessions",label:"ä¼šè¯ç®¡ç†",icon:'<path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>'},{id:"api",label:"API é…ç½®",icon:'<circle cx="12" cy="12" r="3" stroke-width="2"/><path d="M12 1v6m0 6v6M1 12h6m6 0h6" stroke-width="2" stroke-linecap="round"/>'},{id:"general",label:"é€šç”¨è®¾ç½®",icon:'<path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>'},{id:"about",label:"å…³äº",icon:'<circle cx="12" cy="12" r="10" stroke-width="2"/><line x1="12" y1="16" x2="12" y2="12" stroke-width="2" stroke-linecap="round"/><line x1="12" y1="8" x2="12.01" y2="8" stroke-width="2" stroke-linecap="round"/>'}],m=p([]),T=p(0),_=p(!1),M=p(null),k=p([]),o=p({endpoint:"",apiKey:"",model:"gpt-3.5-turbo",customModel:""}),N=()=>{o.value.model!=="custom"&&(o.value.customModel="")},u=p({displayMode:"float",autoOpen:!1,saveHistory:!0}),h=p(null);D(async()=>{await E(),await P()});const E=async()=>{var a;try{const t=await chrome.runtime.sendMessage({type:"GET_SESSIONS"});if(t!=null&&t.success){m.value=t.data||[];let r=0;for(const s of m.value){const i=await chrome.runtime.sendMessage({type:"GET_MESSAGES",payload:{sessionId:s.id}});i!=null&&i.success&&(r+=((a=i.data)==null?void 0:a.length)||0)}T.value=r}}catch(t){console.error("åŠ è½½ä¼šè¯å¤±è´¥:",t)}},P=async()=>{try{const a=await chrome.runtime.sendMessage({type:"GET_SETTING",payload:{key:"displayMode"}});a!=null&&a.success&&a.data&&(u.value.displayMode=a.data);const t=await chrome.runtime.sendMessage({type:"GET_SETTING",payload:{key:"apiKey"}});t!=null&&t.success&&t.data&&(o.value.apiKey=t.data);const r=await chrome.runtime.sendMessage({type:"GET_SETTING",payload:{key:"apiEndpoint"}});r!=null&&r.success&&r.data&&(o.value.endpoint=r.data);const s=await chrome.runtime.sendMessage({type:"GET_SETTING",payload:{key:"model"}}),i=await chrome.runtime.sendMessage({type:"GET_SETTING",payload:{key:"isCustomModel"}});s!=null&&s.success&&s.data&&(i!=null&&i.success&&i.data?(o.value.model="custom",o.value.customModel=s.data):["gpt-3.5-turbo","gpt-4","gpt-4-turbo","gpt-4o","gpt-4o-mini","claude-3-sonnet","claude-3-opus","claude-3-haiku","claude-3.5-sonnet","deepseek-chat","deepseek-coder","qwen-turbo","qwen-plus"].includes(s.data)?o.value.model=s.data:(o.value.model="custom",o.value.customModel=s.data))}catch(a){console.error("åŠ è½½è®¾ç½®å¤±è´¥:",a)}},H=async a=>{try{M.value=m.value.find(r=>r.id===a);const t=await chrome.runtime.sendMessage({type:"GET_MESSAGES",payload:{sessionId:a}});t!=null&&t.success?k.value=t.data||[]:k.value=[],_.value=!0}catch(t){console.error("åŠ è½½ä¼šè¯æ¶ˆæ¯å¤±è´¥:",t),alert("åŠ è½½ä¼šè¯æ¶ˆæ¯å¤±è´¥")}},A=()=>{_.value=!1,M.value=null,k.value=[]},B=async a=>{if(confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªä¼šè¯å—ï¼Ÿ"))try{await chrome.runtime.sendMessage({type:"DELETE_SESSION",payload:{sessionId:a}}),await E()}catch(t){console.error("åˆ é™¤ä¼šè¯å¤±è´¥:",t)}},O=async()=>{try{await chrome.runtime.sendMessage({type:"SAVE_SETTING",payload:{key:"apiKey",value:o.value.apiKey}}),await chrome.runtime.sendMessage({type:"SAVE_SETTING",payload:{key:"apiEndpoint",value:o.value.endpoint}});const a=o.value.model==="custom"?o.value.customModel:o.value.model;await chrome.runtime.sendMessage({type:"SAVE_SETTING",payload:{key:"model",value:a}}),await chrome.runtime.sendMessage({type:"SAVE_SETTING",payload:{key:"isCustomModel",value:o.value.model==="custom"}}),alert("API è®¾ç½®å·²ä¿å­˜")}catch(a){console.error("ä¿å­˜ API è®¾ç½®å¤±è´¥:",a)}},j=async()=>{h.value={success:!0,message:"è¿æ¥æµ‹è¯•åŠŸèƒ½å¾…å®ç°"},setTimeout(()=>{h.value=null},3e3)},z=async()=>{try{await chrome.runtime.sendMessage({type:"SAVE_SETTING",payload:{key:"displayMode",value:u.value.displayMode}}),await chrome.runtime.sendMessage({type:"SAVE_SETTING",payload:{key:"autoOpen",value:u.value.autoOpen}}),await chrome.runtime.sendMessage({type:"SAVE_SETTING",payload:{key:"saveHistory",value:u.value.saveHistory}}),alert("é€šç”¨è®¾ç½®å·²ä¿å­˜")}catch(a){console.error("ä¿å­˜é€šç”¨è®¾ç½®å¤±è´¥:",a)}},w=a=>new Date(a).toLocaleString("zh-CN");return(a,t)=>{var r;return l(),n("div",F,[e("div",Q,[t[8]||(t[8]=e("div",{class:"sidebar-header"},[e("div",{class:"logo"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])]),e("h1",null,"AI Chat Assistant"),e("p",null,"è®¾ç½®ä¸ç®¡ç†")],-1)),e("nav",J,[(l(),n(b,null,g(V,s=>e("a",{key:s.id,class:f(["nav-item",{active:y.value===s.id}]),onClick:i=>y.value=s.id},[(l(),n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",innerHTML:s.icon},null,8,X)),e("span",null,d(s.label),1)],10,W)),64))])]),e("div",Y,[y.value==="sessions"?(l(),n("div",Z,[t[12]||(t[12]=e("div",{class:"section-header"},[e("h2",null,"ä¼šè¯ç®¡ç†")],-1)),e("div",R,[m.value.length===0?(l(),n("div",ee,[...t[9]||(t[9]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),e("p",null,"æš‚æ— ä¼šè¯è®°å½•",-1)])])):c("",!0),(l(!0),n(b,null,g(m.value,s=>(l(),n("div",{key:s.id,class:"session-card"},[e("div",te,[e("h3",null,d(s.title),1),e("p",null,"åˆ›å»ºæ—¶é—´: "+d(w(s.createdAt)),1),e("p",null,"æ›´æ–°æ—¶é—´: "+d(w(s.updatedAt)),1)]),e("div",se,[e("button",{class:"btn-icon",onClick:i=>H(s.id),title:"æŸ¥çœ‹"},[...t[10]||(t[10]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z","stroke-width":"2"}),e("circle",{cx:"12",cy:"12",r:"3","stroke-width":"2"})],-1)])],8,oe),e("button",{class:"btn-icon",onClick:i=>B(s.id),title:"åˆ é™¤"},[...t[11]||(t[11]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("polyline",{points:"3 6 5 6 21 6","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])],8,ae)])]))),128))])])):c("",!0),_.value?(l(),n("div",{key:1,class:"modal-overlay",onClick:K(A,["self"])},[e("div",le,[e("div",ne,[e("h3",null,d(((r=M.value)==null?void 0:r.title)||"ä¼šè¯è¯¦æƒ…"),1),e("button",{class:"modal-close",onClick:A},[...t[13]||(t[13]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18","stroke-width":"2","stroke-linecap":"round"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18","stroke-width":"2","stroke-linecap":"round"})],-1)])])]),e("div",ie,[k.value.length===0?(l(),n("div",de," æš‚æ— æ¶ˆæ¯è®°å½• ")):(l(),n("div",re,[(l(!0),n(b,null,g(k.value,s=>(l(),n("div",{key:s.id||s.createdAt,class:f(["message-item",s.role])},[e("div",ue,d(s.role==="user"?"ç”¨æˆ·":"AI"),1),e("div",ce,[s.think?(l(),n("div",pe,[t[14]||(t[14]=e("div",{class:"think-header"},[e("span",{class:"think-icon"},"ğŸ’­"),e("span",{class:"think-label"},"æ€è€ƒè¿‡ç¨‹")],-1)),e("div",ve,d(s.think),1)])):c("",!0),s.blocks&&s.blocks.length>0?(l(!0),n(b,{key:1},g(s.blocks,(i,C)=>(l(),n(b,{key:C},[i.type==="text"?(l(),n("div",ye,d(i.text),1)):i.type==="tool_use"?(l(),n("div",me,[e("div",ke,[t[15]||(t[15]=e("span",{class:"tool-icon"},"âš™",-1)),e("span",he,d(i.name),1),i.status?(l(),n("span",{key:0,class:f(["tool-badge",i.status])},d(i.status==="approved"?"å·²æ‰¹å‡†":i.status==="rejected"?"å·²æ‹’ç»":"å¾…å¤„ç†"),3)):c("",!0)]),e("pre",be,d(JSON.stringify(i.input,null,2)),1)])):c("",!0)],64))),128)):s.content?(l(),n("div",ge,d(s.content),1)):c("",!0)]),e("div",fe,d(w(s.createdAt)),1)],2))),128))]))])])])):c("",!0),y.value==="api"?(l(),n("div",_e,[t[25]||(t[25]=e("div",{class:"section-header"},[e("h2",null,"API é…ç½®")],-1)),e("div",Me,[e("div",we,[t[16]||(t[16]=e("label",null,"API ç«¯ç‚¹",-1)),v(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>o.value.endpoint=s),placeholder:"https://api.openai.com/v1/chat/completions",class:"form-input"},null,512),[[S,o.value.endpoint]]),t[17]||(t[17]=e("p",{class:"form-hint"},"è¾“å…¥ä½ çš„ AI API ç«¯ç‚¹åœ°å€",-1))]),e("div",Se,[t[18]||(t[18]=e("label",null,"API å¯†é’¥",-1)),v(e("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=s=>o.value.apiKey=s),placeholder:"sk-...",class:"form-input"},null,512),[[S,o.value.apiKey]]),t[19]||(t[19]=e("p",{class:"form-hint"},"ä½ çš„ API å¯†é’¥å°†è¢«å®‰å…¨å­˜å‚¨",-1))]),e("div",Te,[t[21]||(t[21]=e("label",null,"æ¨¡å‹",-1)),v(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.value.model=s),class:"form-select",onChange:N},[...t[20]||(t[20]=[x('<optgroup label="OpenAI" data-v-b92cc1c8><option value="gpt-3.5-turbo" data-v-b92cc1c8>GPT-3.5 Turbo</option><option value="gpt-4" data-v-b92cc1c8>GPT-4</option><option value="gpt-4-turbo" data-v-b92cc1c8>GPT-4 Turbo</option><option value="gpt-4o" data-v-b92cc1c8>GPT-4o</option><option value="gpt-4o-mini" data-v-b92cc1c8>GPT-4o Mini</option></optgroup><optgroup label="Anthropic" data-v-b92cc1c8><option value="claude-3-sonnet" data-v-b92cc1c8>Claude 3 Sonnet</option><option value="claude-3-opus" data-v-b92cc1c8>Claude 3 Opus</option><option value="claude-3-haiku" data-v-b92cc1c8>Claude 3 Haiku</option><option value="claude-3.5-sonnet" data-v-b92cc1c8>Claude 3.5 Sonnet</option></optgroup><optgroup label="å…¶ä»–" data-v-b92cc1c8><option value="deepseek-chat" data-v-b92cc1c8>DeepSeek Chat</option><option value="deepseek-coder" data-v-b92cc1c8>DeepSeek Coder</option><option value="qwen-turbo" data-v-b92cc1c8>Qwen Turbo</option><option value="qwen-plus" data-v-b92cc1c8>Qwen Plus</option><option value="custom" data-v-b92cc1c8>è‡ªå®šä¹‰æ¨¡å‹...</option></optgroup>',3)])],544),[[L,o.value.model]]),t[22]||(t[22]=e("p",{class:"form-hint"},"é€‰æ‹©è¦ä½¿ç”¨çš„ AI æ¨¡å‹",-1))]),o.value.model==="custom"?(l(),n("div",Ee,[t[23]||(t[23]=e("label",null,"è‡ªå®šä¹‰æ¨¡å‹åç§°",-1)),v(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=s=>o.value.customModel=s),placeholder:"è¾“å…¥æ¨¡å‹åç§°ï¼Œå¦‚ llama-3-70b",class:"form-input"},null,512),[[S,o.value.customModel]]),t[24]||(t[24]=e("p",{class:"form-hint"},"è¾“å…¥ä½ çš„è‡ªå®šä¹‰æ¨¡å‹æ ‡è¯†ç¬¦",-1))])):c("",!0),e("div",{class:"form-actions"},[e("button",{class:"btn-primary",onClick:O},"ä¿å­˜è®¾ç½®"),e("button",{class:"btn-secondary",onClick:j},"æµ‹è¯•è¿æ¥")]),h.value?(l(),n("div",{key:1,class:f(["alert",h.value.success?"alert-success":"alert-error"])},d(h.value.message),3)):c("",!0)])])):c("",!0),y.value==="general"?(l(),n("div",Ae,[t[31]||(t[31]=e("div",{class:"section-header"},[e("h2",null,"é€šç”¨è®¾ç½®")],-1)),e("div",Ce,[e("div",xe,[t[28]||(t[28]=e("label",null,"é»˜è®¤æ˜¾ç¤ºæ¨¡å¼",-1)),e("div",Ie,[e("label",Ge,[v(e("input",{type:"radio",value:"float","onUpdate:modelValue":t[4]||(t[4]=s=>u.value.displayMode=s)},null,512),[[I,u.value.displayMode]]),t[26]||(t[26]=e("span",null,"æ‚¬æµ®çª—å£",-1))]),e("label",Ve,[v(e("input",{type:"radio",value:"sidebar","onUpdate:modelValue":t[5]||(t[5]=s=>u.value.displayMode=s)},null,512),[[I,u.value.displayMode]]),t[27]||(t[27]=e("span",null,"ä¾§è¾¹æ ",-1))])])]),e("div",Ne,[e("label",Pe,[v(e("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=s=>u.value.autoOpen=s)},null,512),[[G,u.value.autoOpen]]),t[29]||(t[29]=e("span",null,"é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æ‰“å¼€èŠå¤©çª—å£",-1))])]),e("div",He,[e("label",Be,[v(e("input",{type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=s=>u.value.saveHistory=s)},null,512),[[G,u.value.saveHistory]]),t[30]||(t[30]=e("span",null,"ä¿å­˜èŠå¤©å†å²è®°å½•",-1))])]),e("div",{class:"form-actions"},[e("button",{class:"btn-primary",onClick:z},"ä¿å­˜è®¾ç½®")])])])):c("",!0),y.value==="about"?(l(),n("div",Oe,[t[36]||(t[36]=e("div",{class:"section-header"},[e("h2",null,"å…³äº")],-1)),e("div",je,[t[34]||(t[34]=x('<div class="about-logo" data-v-b92cc1c8><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" data-v-b92cc1c8><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-b92cc1c8></path></svg></div><h3 data-v-b92cc1c8>AI Chat Assistant</h3><p class="version" data-v-b92cc1c8>ç‰ˆæœ¬ 1.0.0</p><p class="description" data-v-b92cc1c8> ä¸€ä¸ªåŸºäº Vue3 + TypeScript çš„æµè§ˆå™¨ AI èŠå¤©åŠ©æ‰‹æ’ä»¶ï¼Œ æ”¯æŒæ‚¬æµ®çª—å£å’Œä¾§è¾¹æ ä¸¤ç§æ˜¾ç¤ºæ¨¡å¼ï¼Œæä¾›æ™ºèƒ½å¯¹è¯åŠŸèƒ½ã€‚ </p>',4)),e("div",ze,[e("div",Ue,[e("div",De,d(m.value.length),1),t[32]||(t[32]=e("div",{class:"stat-label"},"æ€»ä¼šè¯æ•°",-1))]),e("div",Ke,[e("div",Le,d(T.value),1),t[33]||(t[33]=e("div",{class:"stat-label"},"æ€»æ¶ˆæ¯æ•°",-1))])]),t[35]||(t[35]=e("div",{class:"about-links"},[e("a",{href:"#",class:"link-btn"},"ä½¿ç”¨æ–‡æ¡£"),e("a",{href:"#",class:"link-btn"},"åé¦ˆé—®é¢˜"),e("a",{href:"#",class:"link-btn"},"å¼€æºåœ°å€")],-1))])])):c("",!0)])])}}}),$e=q(qe,[["__scopeId","data-v-b92cc1c8"]]);$($e).mount("#app");

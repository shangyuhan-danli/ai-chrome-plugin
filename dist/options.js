import{d as H,f as B,o as i,c as d,b as e,F as M,r as w,n as T,t as p,g as c,h as u,v as f,i as O,a as S,j as E,k as A,l as m,_ as j,e as z}from"./chunks/_plugin-vue_export-helper-C6Ao9Pha.js";const U={class:"options-container"},D={class:"sidebar"},K={class:"sidebar-nav"},L=["onClick"],q=["innerHTML"],$={class:"main-content"},F={key:0,class:"content-section"},Q={class:"sessions-list"},J={key:0,class:"empty-state"},W={class:"session-info"},X={class:"session-actions"},Y=["onClick"],Z=["onClick"],R={key:1,class:"content-section"},ee={class:"form-section"},te={class:"form-group"},oe={class:"form-group"},se={class:"form-group"},ae={key:0,class:"form-group"},le={key:2,class:"content-section"},ne={class:"form-section"},ie={class:"form-group"},de={class:"radio-group"},re={class:"radio-option"},ue={class:"radio-option"},pe={class:"form-group"},ce={class:"checkbox-label"},ve={class:"form-group"},me={class:"checkbox-label"},be={key:3,class:"content-section"},ye={class:"about-content"},fe={class:"about-stats"},ke={class:"stat-card"},ge={class:"stat-value"},he={class:"stat-card"},Me={class:"stat-value"},we=H({__name:"App",setup(Se){const v=m("sessions"),C=[{id:"sessions",label:"会话管理",icon:'<path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>'},{id:"api",label:"API 配置",icon:'<circle cx="12" cy="12" r="3" stroke-width="2"/><path d="M12 1v6m0 6v6M1 12h6m6 0h6" stroke-width="2" stroke-linecap="round"/>'},{id:"general",label:"通用设置",icon:'<path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>'},{id:"about",label:"关于",icon:'<circle cx="12" cy="12" r="10" stroke-width="2"/><line x1="12" y1="16" x2="12" y2="12" stroke-width="2" stroke-linecap="round"/><line x1="12" y1="8" x2="12.01" y2="8" stroke-width="2" stroke-linecap="round"/>'}],b=m([]),k=m(0),s=m({endpoint:"",apiKey:"",model:"gpt-3.5-turbo",customModel:""}),_=()=>{s.value.model!=="custom"&&(s.value.customModel="")},n=m({displayMode:"float",autoOpen:!1,saveHistory:!0}),y=m(null);B(async()=>{await g(),await I()});const g=async()=>{var a;try{const t=await chrome.runtime.sendMessage({type:"GET_SESSIONS"});if(t!=null&&t.success){b.value=t.data||[];let o=0;for(const l of b.value){const r=await chrome.runtime.sendMessage({type:"GET_MESSAGES",payload:{sessionId:l.id}});r!=null&&r.success&&(o+=((a=r.data)==null?void 0:a.length)||0)}k.value=o}}catch(t){console.error("加载会话失败:",t)}},I=async()=>{try{const a=await chrome.runtime.sendMessage({type:"GET_SETTING",payload:{key:"displayMode"}});a!=null&&a.success&&a.data&&(n.value.displayMode=a.data);const t=await chrome.runtime.sendMessage({type:"GET_SETTING",payload:{key:"apiKey"}});t!=null&&t.success&&t.data&&(s.value.apiKey=t.data);const o=await chrome.runtime.sendMessage({type:"GET_SETTING",payload:{key:"apiEndpoint"}});o!=null&&o.success&&o.data&&(s.value.endpoint=o.data);const l=await chrome.runtime.sendMessage({type:"GET_SETTING",payload:{key:"model"}}),r=await chrome.runtime.sendMessage({type:"GET_SETTING",payload:{key:"isCustomModel"}});l!=null&&l.success&&l.data&&(r!=null&&r.success&&r.data?(s.value.model="custom",s.value.customModel=l.data):["gpt-3.5-turbo","gpt-4","gpt-4-turbo","gpt-4o","gpt-4o-mini","claude-3-sonnet","claude-3-opus","claude-3-haiku","claude-3.5-sonnet","deepseek-chat","deepseek-coder","qwen-turbo","qwen-plus"].includes(l.data)?s.value.model=l.data:(s.value.model="custom",s.value.customModel=l.data))}catch(a){console.error("加载设置失败:",a)}},V=async a=>{alert(`查看会话 ${a} 的功能待实现`)},G=async a=>{if(confirm("确定要删除这个会话吗？"))try{await chrome.runtime.sendMessage({type:"DELETE_SESSION",payload:{sessionId:a}}),await g()}catch(t){console.error("删除会话失败:",t)}},x=async()=>{try{await chrome.runtime.sendMessage({type:"SAVE_SETTING",payload:{key:"apiKey",value:s.value.apiKey}}),await chrome.runtime.sendMessage({type:"SAVE_SETTING",payload:{key:"apiEndpoint",value:s.value.endpoint}});const a=s.value.model==="custom"?s.value.customModel:s.value.model;await chrome.runtime.sendMessage({type:"SAVE_SETTING",payload:{key:"model",value:a}}),await chrome.runtime.sendMessage({type:"SAVE_SETTING",payload:{key:"isCustomModel",value:s.value.model==="custom"}}),alert("API 设置已保存")}catch(a){console.error("保存 API 设置失败:",a)}},N=async()=>{y.value={success:!0,message:"连接测试功能待实现"},setTimeout(()=>{y.value=null},3e3)},P=async()=>{try{await chrome.runtime.sendMessage({type:"SAVE_SETTING",payload:{key:"displayMode",value:n.value.displayMode}}),await chrome.runtime.sendMessage({type:"SAVE_SETTING",payload:{key:"autoOpen",value:n.value.autoOpen}}),await chrome.runtime.sendMessage({type:"SAVE_SETTING",payload:{key:"saveHistory",value:n.value.saveHistory}}),alert("通用设置已保存")}catch(a){console.error("保存通用设置失败:",a)}},h=a=>new Date(a).toLocaleString("zh-CN");return(a,t)=>(i(),d("div",U,[e("div",D,[t[8]||(t[8]=e("div",{class:"sidebar-header"},[e("div",{class:"logo"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])]),e("h1",null,"AI Chat Assistant"),e("p",null,"设置与管理")],-1)),e("nav",K,[(i(),d(M,null,w(C,o=>e("a",{key:o.id,class:T(["nav-item",{active:v.value===o.id}]),onClick:l=>v.value=o.id},[(i(),d("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",innerHTML:o.icon},null,8,q)),e("span",null,p(o.label),1)],10,L)),64))])]),e("div",$,[v.value==="sessions"?(i(),d("div",F,[t[12]||(t[12]=e("div",{class:"section-header"},[e("h2",null,"会话管理")],-1)),e("div",Q,[b.value.length===0?(i(),d("div",J,[...t[9]||(t[9]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),e("p",null,"暂无会话记录",-1)])])):c("",!0),(i(!0),d(M,null,w(b.value,o=>(i(),d("div",{key:o.id,class:"session-card"},[e("div",W,[e("h3",null,p(o.title),1),e("p",null,"创建时间: "+p(h(o.createdAt)),1),e("p",null,"更新时间: "+p(h(o.updatedAt)),1)]),e("div",X,[e("button",{class:"btn-icon",onClick:l=>V(o.id),title:"查看"},[...t[10]||(t[10]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z","stroke-width":"2"}),e("circle",{cx:"12",cy:"12",r:"3","stroke-width":"2"})],-1)])],8,Y),e("button",{class:"btn-icon",onClick:l=>G(o.id),title:"删除"},[...t[11]||(t[11]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("polyline",{points:"3 6 5 6 21 6","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])],8,Z)])]))),128))])])):c("",!0),v.value==="api"?(i(),d("div",R,[t[22]||(t[22]=e("div",{class:"section-header"},[e("h2",null,"API 配置")],-1)),e("div",ee,[e("div",te,[t[13]||(t[13]=e("label",null,"API 端点",-1)),u(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=o=>s.value.endpoint=o),placeholder:"https://api.openai.com/v1/chat/completions",class:"form-input"},null,512),[[f,s.value.endpoint]]),t[14]||(t[14]=e("p",{class:"form-hint"},"输入你的 AI API 端点地址",-1))]),e("div",oe,[t[15]||(t[15]=e("label",null,"API 密钥",-1)),u(e("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=o=>s.value.apiKey=o),placeholder:"sk-...",class:"form-input"},null,512),[[f,s.value.apiKey]]),t[16]||(t[16]=e("p",{class:"form-hint"},"你的 API 密钥将被安全存储",-1))]),e("div",se,[t[18]||(t[18]=e("label",null,"模型",-1)),u(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>s.value.model=o),class:"form-select",onChange:_},[...t[17]||(t[17]=[S('<optgroup label="OpenAI" data-v-fbf8b31c><option value="gpt-3.5-turbo" data-v-fbf8b31c>GPT-3.5 Turbo</option><option value="gpt-4" data-v-fbf8b31c>GPT-4</option><option value="gpt-4-turbo" data-v-fbf8b31c>GPT-4 Turbo</option><option value="gpt-4o" data-v-fbf8b31c>GPT-4o</option><option value="gpt-4o-mini" data-v-fbf8b31c>GPT-4o Mini</option></optgroup><optgroup label="Anthropic" data-v-fbf8b31c><option value="claude-3-sonnet" data-v-fbf8b31c>Claude 3 Sonnet</option><option value="claude-3-opus" data-v-fbf8b31c>Claude 3 Opus</option><option value="claude-3-haiku" data-v-fbf8b31c>Claude 3 Haiku</option><option value="claude-3.5-sonnet" data-v-fbf8b31c>Claude 3.5 Sonnet</option></optgroup><optgroup label="其他" data-v-fbf8b31c><option value="deepseek-chat" data-v-fbf8b31c>DeepSeek Chat</option><option value="deepseek-coder" data-v-fbf8b31c>DeepSeek Coder</option><option value="qwen-turbo" data-v-fbf8b31c>Qwen Turbo</option><option value="qwen-plus" data-v-fbf8b31c>Qwen Plus</option><option value="custom" data-v-fbf8b31c>自定义模型...</option></optgroup>',3)])],544),[[O,s.value.model]]),t[19]||(t[19]=e("p",{class:"form-hint"},"选择要使用的 AI 模型",-1))]),s.value.model==="custom"?(i(),d("div",ae,[t[20]||(t[20]=e("label",null,"自定义模型名称",-1)),u(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=o=>s.value.customModel=o),placeholder:"输入模型名称，如 llama-3-70b",class:"form-input"},null,512),[[f,s.value.customModel]]),t[21]||(t[21]=e("p",{class:"form-hint"},"输入你的自定义模型标识符",-1))])):c("",!0),e("div",{class:"form-actions"},[e("button",{class:"btn-primary",onClick:x},"保存设置"),e("button",{class:"btn-secondary",onClick:N},"测试连接")]),y.value?(i(),d("div",{key:1,class:T(["alert",y.value.success?"alert-success":"alert-error"])},p(y.value.message),3)):c("",!0)])])):c("",!0),v.value==="general"?(i(),d("div",le,[t[28]||(t[28]=e("div",{class:"section-header"},[e("h2",null,"通用设置")],-1)),e("div",ne,[e("div",ie,[t[25]||(t[25]=e("label",null,"默认显示模式",-1)),e("div",de,[e("label",re,[u(e("input",{type:"radio",value:"float","onUpdate:modelValue":t[4]||(t[4]=o=>n.value.displayMode=o)},null,512),[[E,n.value.displayMode]]),t[23]||(t[23]=e("span",null,"悬浮窗口",-1))]),e("label",ue,[u(e("input",{type:"radio",value:"sidebar","onUpdate:modelValue":t[5]||(t[5]=o=>n.value.displayMode=o)},null,512),[[E,n.value.displayMode]]),t[24]||(t[24]=e("span",null,"侧边栏",-1))])])]),e("div",pe,[e("label",ce,[u(e("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=o=>n.value.autoOpen=o)},null,512),[[A,n.value.autoOpen]]),t[26]||(t[26]=e("span",null,"页面加载时自动打开聊天窗口",-1))])]),e("div",ve,[e("label",me,[u(e("input",{type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=o=>n.value.saveHistory=o)},null,512),[[A,n.value.saveHistory]]),t[27]||(t[27]=e("span",null,"保存聊天历史记录",-1))])]),e("div",{class:"form-actions"},[e("button",{class:"btn-primary",onClick:P},"保存设置")])])])):c("",!0),v.value==="about"?(i(),d("div",be,[t[33]||(t[33]=e("div",{class:"section-header"},[e("h2",null,"关于")],-1)),e("div",ye,[t[31]||(t[31]=S('<div class="about-logo" data-v-fbf8b31c><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" data-v-fbf8b31c><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-fbf8b31c></path></svg></div><h3 data-v-fbf8b31c>AI Chat Assistant</h3><p class="version" data-v-fbf8b31c>版本 1.0.0</p><p class="description" data-v-fbf8b31c> 一个基于 Vue3 + TypeScript 的浏览器 AI 聊天助手插件， 支持悬浮窗口和侧边栏两种显示模式，提供智能对话功能。 </p>',4)),e("div",fe,[e("div",ke,[e("div",ge,p(b.value.length),1),t[29]||(t[29]=e("div",{class:"stat-label"},"总会话数",-1))]),e("div",he,[e("div",Me,p(k.value),1),t[30]||(t[30]=e("div",{class:"stat-label"},"总消息数",-1))])]),t[32]||(t[32]=e("div",{class:"about-links"},[e("a",{href:"#",class:"link-btn"},"使用文档"),e("a",{href:"#",class:"link-btn"},"反馈问题"),e("a",{href:"#",class:"link-btn"},"开源地址")],-1))])])):c("",!0)])]))}}),Te=j(we,[["__scopeId","data-v-fbf8b31c"]]);z(Te).mount("#app");

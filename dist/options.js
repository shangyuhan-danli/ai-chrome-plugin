import{d as P,o as B,a as n,c as i,e,F as f,g as S,n as T,t as d,h as z,i as p,j as u,v as M,k as O,b as E,l as _,m as C,r as v,_ as j,f as U}from"./chunks/_plugin-vue_export-helper-C2GHlnqk.js";const D={class:"options-container"},K={class:"sidebar"},L={class:"sidebar-nav"},$=["onClick"],F=["innerHTML"],q={class:"main-content"},J={key:0,class:"content-section"},Q={class:"sessions-list"},W={key:0,class:"empty-state"},X={class:"session-info"},Y={class:"session-actions"},Z=["onClick"],R=["onClick"],ee={key:1,class:"content-section"},te={class:"form-section"},se={class:"form-group"},ae={class:"form-group"},oe={class:"form-group"},le={key:2,class:"content-section"},ne={class:"form-section"},ie={class:"form-group"},re={class:"radio-group"},de={class:"radio-option"},ue={class:"radio-option"},ce={class:"form-group"},pe={class:"checkbox-label"},ve={class:"form-group"},ye={class:"checkbox-label"},ke={key:3,class:"content-section"},me={class:"about-content"},he={class:"about-stats"},be={class:"stat-card"},ge={class:"stat-value"},we={class:"stat-card"},fe={class:"stat-value"},Se=P({__name:"App",setup(Me){const c=v("sessions"),A=[{id:"sessions",label:"会话管理",icon:'<path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>'},{id:"api",label:"API 配置",icon:'<circle cx="12" cy="12" r="3" stroke-width="2"/><path d="M12 1v6m0 6v6M1 12h6m6 0h6" stroke-width="2" stroke-linecap="round"/>'},{id:"general",label:"通用设置",icon:'<path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>'},{id:"about",label:"关于",icon:'<circle cx="12" cy="12" r="10" stroke-width="2"/><line x1="12" y1="16" x2="12" y2="12" stroke-width="2" stroke-linecap="round"/><line x1="12" y1="8" x2="12.01" y2="8" stroke-width="2" stroke-linecap="round"/>'}],y=v([]),b=v(0),o=v({endpoint:"",apiKey:"",model:"gpt-3.5-turbo"}),l=v({displayMode:"float",autoOpen:!1,saveHistory:!0}),k=v(null);B(async()=>{await h(),await x()});const h=async()=>{var a;try{const t=await chrome.runtime.sendMessage({type:"GET_SESSIONS"});if(t!=null&&t.success){y.value=t.data||[];let s=0;for(const r of y.value){const m=await chrome.runtime.sendMessage({type:"GET_MESSAGES",payload:{sessionId:r.id}});m!=null&&m.success&&(s+=((a=m.data)==null?void 0:a.length)||0)}b.value=s}}catch(t){console.error("加载会话失败:",t)}},x=async()=>{try{const a=await chrome.runtime.sendMessage({type:"GET_SETTING",payload:{key:"displayMode"}});a!=null&&a.success&&a.data&&(l.value.displayMode=a.data);const t=await chrome.runtime.sendMessage({type:"GET_SETTING",payload:{key:"apiKey"}});t!=null&&t.success&&t.data&&(o.value.apiKey=t.data);const s=await chrome.runtime.sendMessage({type:"GET_SETTING",payload:{key:"apiEndpoint"}});s!=null&&s.success&&s.data&&(o.value.endpoint=s.data);const r=await chrome.runtime.sendMessage({type:"GET_SETTING",payload:{key:"model"}});r!=null&&r.success&&r.data&&(o.value.model=r.data)}catch(a){console.error("加载设置失败:",a)}},g=async()=>{try{await chrome.runtime.sendMessage({type:"CREATE_SESSION",payload:{title:`新对话 ${new Date().toLocaleString("zh-CN")}`}}),await h()}catch(a){console.error("创建会话失败:",a)}},I=async a=>{alert(`查看会话 ${a} 的功能待实现`)},V=async a=>{if(confirm("确定要删除这个会话吗？"))try{await chrome.runtime.sendMessage({type:"DELETE_SESSION",payload:{sessionId:a}}),await h()}catch(t){console.error("删除会话失败:",t)}},G=async()=>{try{await chrome.runtime.sendMessage({type:"SAVE_SETTING",payload:{key:"apiKey",value:o.value.apiKey}}),await chrome.runtime.sendMessage({type:"SAVE_SETTING",payload:{key:"apiEndpoint",value:o.value.endpoint}}),await chrome.runtime.sendMessage({type:"SAVE_SETTING",payload:{key:"model",value:o.value.model}}),alert("API 设置已保存")}catch(a){console.error("保存 API 设置失败:",a)}},N=async()=>{k.value={success:!0,message:"连接测试功能待实现"},setTimeout(()=>{k.value=null},3e3)},H=async()=>{try{await chrome.runtime.sendMessage({type:"SAVE_SETTING",payload:{key:"displayMode",value:l.value.displayMode}}),await chrome.runtime.sendMessage({type:"SAVE_SETTING",payload:{key:"autoOpen",value:l.value.autoOpen}}),await chrome.runtime.sendMessage({type:"SAVE_SETTING",payload:{key:"saveHistory",value:l.value.saveHistory}}),alert("通用设置已保存")}catch(a){console.error("保存通用设置失败:",a)}},w=a=>new Date(a).toLocaleString("zh-CN");return(a,t)=>(n(),i("div",D,[e("div",K,[t[7]||(t[7]=e("div",{class:"sidebar-header"},[e("div",{class:"logo"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])]),e("h1",null,"AI Chat Assistant"),e("p",null,"设置与管理")],-1)),e("nav",L,[(n(),i(f,null,S(A,s=>e("a",{key:s.id,class:T(["nav-item",{active:c.value===s.id}]),onClick:r=>c.value=s.id},[(n(),i("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",innerHTML:s.icon},null,8,F)),e("span",null,d(s.label),1)],10,$)),64))])]),e("div",q,[c.value==="sessions"?(n(),i("div",J,[e("div",{class:"section-header"},[t[9]||(t[9]=e("h2",null,"会话管理",-1)),e("button",{class:"btn-primary",onClick:g},[...t[8]||(t[8]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("line",{x1:"12",y1:"5",x2:"12",y2:"19","stroke-width":"2","stroke-linecap":"round"}),e("line",{x1:"5",y1:"12",x2:"19",y2:"12","stroke-width":"2","stroke-linecap":"round"})],-1),z(" 新建会话 ",-1)])])]),e("div",Q,[y.value.length===0?(n(),i("div",W,[t[10]||(t[10]=e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),t[11]||(t[11]=e("p",null,"暂无会话记录",-1)),e("button",{class:"btn-secondary",onClick:g},"创建第一个会话")])):p("",!0),(n(!0),i(f,null,S(y.value,s=>(n(),i("div",{key:s.id,class:"session-card"},[e("div",X,[e("h3",null,d(s.title),1),e("p",null,"创建时间: "+d(w(s.createdAt)),1),e("p",null,"更新时间: "+d(w(s.updatedAt)),1)]),e("div",Y,[e("button",{class:"btn-icon",onClick:r=>I(s.id),title:"查看"},[...t[12]||(t[12]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z","stroke-width":"2"}),e("circle",{cx:"12",cy:"12",r:"3","stroke-width":"2"})],-1)])],8,Z),e("button",{class:"btn-icon",onClick:r=>V(s.id),title:"删除"},[...t[13]||(t[13]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("polyline",{points:"3 6 5 6 21 6","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])],8,R)])]))),128))])])):p("",!0),c.value==="api"?(n(),i("div",ee,[t[20]||(t[20]=e("div",{class:"section-header"},[e("h2",null,"API 配置")],-1)),e("div",te,[e("div",se,[t[14]||(t[14]=e("label",null,"API 端点",-1)),u(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>o.value.endpoint=s),placeholder:"https://api.openai.com/v1/chat/completions",class:"form-input"},null,512),[[M,o.value.endpoint]]),t[15]||(t[15]=e("p",{class:"form-hint"},"输入你的 AI API 端点地址",-1))]),e("div",ae,[t[16]||(t[16]=e("label",null,"API 密钥",-1)),u(e("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=s=>o.value.apiKey=s),placeholder:"sk-...",class:"form-input"},null,512),[[M,o.value.apiKey]]),t[17]||(t[17]=e("p",{class:"form-hint"},"你的 API 密钥将被安全存储",-1))]),e("div",oe,[t[19]||(t[19]=e("label",null,"模型",-1)),u(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.value.model=s),class:"form-select"},[...t[18]||(t[18]=[E('<option value="gpt-3.5-turbo" data-v-6a38a7ea>GPT-3.5 Turbo</option><option value="gpt-4" data-v-6a38a7ea>GPT-4</option><option value="gpt-4-turbo" data-v-6a38a7ea>GPT-4 Turbo</option><option value="claude-3-sonnet" data-v-6a38a7ea>Claude 3 Sonnet</option><option value="claude-3-opus" data-v-6a38a7ea>Claude 3 Opus</option>',5)])],512),[[O,o.value.model]])]),e("div",{class:"form-actions"},[e("button",{class:"btn-primary",onClick:G},"保存设置"),e("button",{class:"btn-secondary",onClick:N},"测试连接")]),k.value?(n(),i("div",{key:0,class:T(["alert",k.value.success?"alert-success":"alert-error"])},d(k.value.message),3)):p("",!0)])])):p("",!0),c.value==="general"?(n(),i("div",le,[t[26]||(t[26]=e("div",{class:"section-header"},[e("h2",null,"通用设置")],-1)),e("div",ne,[e("div",ie,[t[23]||(t[23]=e("label",null,"默认显示模式",-1)),e("div",re,[e("label",de,[u(e("input",{type:"radio",value:"float","onUpdate:modelValue":t[3]||(t[3]=s=>l.value.displayMode=s)},null,512),[[_,l.value.displayMode]]),t[21]||(t[21]=e("span",null,"悬浮窗口",-1))]),e("label",ue,[u(e("input",{type:"radio",value:"sidebar","onUpdate:modelValue":t[4]||(t[4]=s=>l.value.displayMode=s)},null,512),[[_,l.value.displayMode]]),t[22]||(t[22]=e("span",null,"侧边栏",-1))])])]),e("div",ce,[e("label",pe,[u(e("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=s=>l.value.autoOpen=s)},null,512),[[C,l.value.autoOpen]]),t[24]||(t[24]=e("span",null,"页面加载时自动打开聊天窗口",-1))])]),e("div",ve,[e("label",ye,[u(e("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=s=>l.value.saveHistory=s)},null,512),[[C,l.value.saveHistory]]),t[25]||(t[25]=e("span",null,"保存聊天历史记录",-1))])]),e("div",{class:"form-actions"},[e("button",{class:"btn-primary",onClick:H},"保存设置")])])])):p("",!0),c.value==="about"?(n(),i("div",ke,[t[31]||(t[31]=e("div",{class:"section-header"},[e("h2",null,"关于")],-1)),e("div",me,[t[29]||(t[29]=E('<div class="about-logo" data-v-6a38a7ea><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" data-v-6a38a7ea><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-6a38a7ea></path></svg></div><h3 data-v-6a38a7ea>AI Chat Assistant</h3><p class="version" data-v-6a38a7ea>版本 1.0.0</p><p class="description" data-v-6a38a7ea> 一个基于 Vue3 + TypeScript 的浏览器 AI 聊天助手插件， 支持悬浮窗口和侧边栏两种显示模式，提供智能对话功能。 </p>',4)),e("div",he,[e("div",be,[e("div",ge,d(y.value.length),1),t[27]||(t[27]=e("div",{class:"stat-label"},"总会话数",-1))]),e("div",we,[e("div",fe,d(b.value),1),t[28]||(t[28]=e("div",{class:"stat-label"},"总消息数",-1))])]),t[30]||(t[30]=e("div",{class:"about-links"},[e("a",{href:"#",class:"link-btn"},"使用文档"),e("a",{href:"#",class:"link-btn"},"反馈问题"),e("a",{href:"#",class:"link-btn"},"开源地址")],-1))])])):p("",!0)])]))}}),Te=j(Se,[["__scopeId","data-v-6a38a7ea"]]);U(Te).mount("#app");

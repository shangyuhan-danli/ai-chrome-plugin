var _e=Object.defineProperty;var be=(N,l,h)=>l in N?_e(N,l,{enumerable:!0,configurable:!0,writable:!0,value:h}):N[l]=h;var te=(N,l,h)=>be(N,typeof l!="symbol"?l+"":l,h);import{d as Ce,f as Te,m as T,o as d,c as p,b as t,t as B,g as S,n as H,F as z,r as q,h as se,v as oe,w as F,p as Me,l as f,q as K,s as Se,_ as Ae,e as Ie}from"./chunks/_plugin-vue_export-helper-C6Ao9Pha.js";class Be{constructor(){te(this,"tools",new Map);this.registerBuiltinTools()}registerBuiltinTools(){this.register({name:"page_action",description:"åœ¨ç”¨æˆ·å½“å‰æµè§ˆçš„ç½‘é¡µä¸Šæ‰§è¡Œæ“ä½œï¼Œå¦‚å¡«å……è¾“å…¥æ¡†ã€ç‚¹å‡»æŒ‰é’®ã€é«˜äº®æ–‡å­—ç­‰ã€‚å¯ä»¥æ‰¹é‡æ‰§è¡Œå¤šä¸ªæ“ä½œã€‚",parameters:{type:"object",properties:{actions:{type:"array",description:"è¦æ‰§è¡Œçš„æ“ä½œåˆ—è¡¨",items:{type:"object",properties:{action:{type:"string",enum:["fill","click","highlight","underline","select","check","scroll","read"],description:"æ“ä½œç±»å‹: fill(å¡«å……è¾“å…¥æ¡†), click(ç‚¹å‡»), highlight(é«˜äº®), underline(ä¸‹åˆ’çº¿), select(é€‰æ‹©ä¸‹æ‹‰), check(å‹¾é€‰), scroll(æ»šåŠ¨), read(è¯»å–å†…å®¹)"},target:{type:"object",description:"ç›®æ ‡å…ƒç´ ",properties:{elementId:{type:"string",description:"å…ƒç´ ID (ä»é¡µé¢ä¸Šä¸‹æ–‡è·å–)"},selector:{type:"string",description:"CSSé€‰æ‹©å™¨ (å¤‡ç”¨)"},description:{type:"string",description:"å…ƒç´ æè¿° (ç”¨äºç¡®è®¤)"}}},params:{type:"object",description:"æ“ä½œå‚æ•°",properties:{value:{type:"string",description:"å¡«å……çš„å€¼æˆ–é€‰æ‹©çš„é€‰é¡¹"},color:{type:"string",description:"é«˜äº®é¢œè‰² (å¦‚ #ffeb3b)"},direction:{type:"string",enum:["up","down","top","bottom"],description:"æ»šåŠ¨æ–¹å‘"}}}},required:["action","target"]}}},required:["actions"]},execute:async(l,h)=>{const v=l.actions||[l],y=await chrome.tabs.sendMessage(h,{type:"EXECUTE_BATCH_ACTIONS",payload:v});return(y==null?void 0:y.data)||{success:!1,error:"æ‰§è¡Œå¤±è´¥"}}}),this.register({name:"request_more_elements",description:"å½“å‰é¡µé¢å…ƒç´ ä¿¡æ¯ä¸è¶³ä»¥å®Œæˆç”¨æˆ·è¯·æ±‚æ—¶ï¼Œè¯·æ±‚ç‰¹å®šåŒºåŸŸæˆ–ç±»å‹çš„æ›´å¤šå…ƒç´ ã€‚",parameters:{type:"object",properties:{region:{type:"string",enum:["form","header","sidebar","footer","below_viewport"],description:"é¡µé¢åŒºåŸŸ: form(è¡¨å•åŒºåŸŸ), header(é¡µå¤´), sidebar(ä¾§è¾¹æ ), footer(é¡µè„š), below_viewport(è§†å£ä¸‹æ–¹)"},elementType:{type:"string",enum:["input","button","link","select","all"],description:"å…ƒç´ ç±»å‹: input(è¾“å…¥æ¡†), button(æŒ‰é’®), link(é“¾æ¥), select(ä¸‹æ‹‰æ¡†), all(æ‰€æœ‰)"},keyword:{type:"string",description:"å…³é”®è¯ç­›é€‰ï¼ŒåŒ¹é…å…ƒç´ çš„æ–‡æœ¬ã€placeholderã€labelç­‰"}}},execute:async(l,h)=>{const v=await chrome.tabs.sendMessage(h,{type:"REQUEST_MORE_ELEMENTS",payload:l});return{success:!0,elements:(v==null?void 0:v.data)||[]}}}),this.register({name:"get_selected_text",description:"è·å–ç”¨æˆ·åœ¨é¡µé¢ä¸Šé€‰ä¸­çš„æ–‡å­—ï¼Œç”¨äºå¯¹é€‰ä¸­å†…å®¹è¿›è¡Œæ“ä½œã€‚",parameters:{type:"object",properties:{}},execute:async(l,h)=>{const v=await chrome.tabs.sendMessage(h,{type:"GET_SELECTED_TEXT"});return{success:!0,text:(v==null?void 0:v.data)||""}}}),this.register({name:"clear_ai_styles",description:"æ¸…é™¤ AI åœ¨é¡µé¢ä¸Šæ·»åŠ çš„æ‰€æœ‰é«˜äº®å’Œä¸‹åˆ’çº¿æ ·å¼ï¼Œæ¢å¤é¡µé¢åŸå§‹çŠ¶æ€ã€‚",parameters:{type:"object",properties:{}},execute:async(l,h)=>{const v=await chrome.tabs.sendMessage(h,{type:"CLEAR_AI_STYLES"});return{success:(v==null?void 0:v.success)||!1}}})}register(l){this.tools.set(l.name,l)}unregister(l){this.tools.delete(l)}isBrowserTool(l){return this.tools.has(l)}getToolNames(){return Array.from(this.tools.keys())}getToolDefinitions(){return Array.from(this.tools.values()).map(l=>({name:l.name,description:l.description,parameters:l.parameters}))}async execute(l,h){const v=this.tools.get(l);if(!v)return JSON.stringify({success:!1,error:`æœªçŸ¥çš„æµè§ˆå™¨å·¥å…·: ${l}`});try{const[y]=await chrome.tabs.query({active:!0,currentWindow:!0});if(!(y!=null&&y.id))return JSON.stringify({success:!1,error:"æ— æ³•è·å–å½“å‰æ ‡ç­¾é¡µ"});let n;try{n=JSON.parse(h)}catch{return JSON.stringify({success:!1,error:"æ— æ•ˆçš„å‚æ•°æ ¼å¼"})}const m=await v.execute(n,y.id);return JSON.stringify(m)}catch(y){return console.error(`æ‰§è¡Œå·¥å…· ${l} å¤±è´¥:`,y),JSON.stringify({success:!1,error:String(y)})}}}const D=new Be,Ee={class:"chat-wrapper"},Ne={class:"chat-container"},je={class:"chat-header"},De={class:"header-left"},Le={class:"header-title"},Oe={class:"header-badges"},Pe=["title"],$e={key:1,class:"model-badge"},He={class:"header-right"},ze={key:0,class:"empty-state"},Ue={key:0,class:"message-box user-box"},Je={key:1,class:"assistant-content"},Re={key:0,class:"think-block"},Ve={class:"think-content"},Ge={key:0,class:"message-box assistant-box"},qe={class:"block-content"},Fe={key:1,class:"tool-block"},Ke={class:"tool-header"},Xe={class:"tool-name"},Qe={key:0,class:"tool-badge approved"},We={key:1,class:"tool-badge rejected"},Ye={class:"tool-params"},Ze={key:0,class:"tool-actions"},et=["onClick"],tt=["onClick"],st={key:1,class:"message assistant"},ot={class:"chat-input-area"},nt={key:0,class:"agent-selected-indicator"},at={key:0,class:"agent-dropdown-menu"},lt={class:"agent-dropdown-header"},rt={class:"agent-dropdown-list"},it={key:0,class:"agent-dropdown-loading"},ct={key:1,class:"agent-dropdown-empty"},ut=["onClick"],dt={class:"agent-dropdown-info"},pt={class:"agent-dropdown-name"},vt={key:0,class:"recommended-tag"},gt={class:"agent-dropdown-desc"},yt={key:0,class:"agent-check"},ft=["onKeydown"],ht=["disabled"],kt=Ce({__name:"App",setup(N){const l=f(),h=f(),v=f(""),y=f(!1),n=f([]),m=f(1),L=f(!1),ne=K(()=>{if(n.value.length===0)return!1;const s=n.value[n.value.length-1];return s.role!=="assistant"?!1:s.blocks.some(e=>e.type==="tool_use"&&e.status==="pending")}),O=f([]),w=f(null),j=f(!1),P=f(""),U=f(!1),$=f(null),X=f(""),Q=f(""),E=f("gpt-3.5-turbo"),x=f(""),M=f(!1),ae=f(null),J=K(()=>window.self!==window.top),W=K(()=>{if(!P.value)return O.value;const s=P.value.toLowerCase();return O.value.filter(e=>{var o;return e.name.toLowerCase().includes(s)||e.description.toLowerCase().includes(s)||((o=e.tags)==null?void 0:o.some(r=>r.toLowerCase().includes(s)))})});Te(async()=>{const s=new URLSearchParams(window.location.search),e=s.get("sessionId");e&&(m.value=parseInt(e));const o=s.get("pageUrl"),r=s.get("pageTitle");o&&(X.value=decodeURIComponent(o)),r&&(Q.value=decodeURIComponent(r)),await ce(),await Y(),await le(),T(()=>{var a;(a=h.value)==null||a.focus()}),window.addEventListener("message",a=>{a.data.type==="PIN_STATUS_CHANGED"&&(L.value=a.data.isPinned),a.data.type==="PAGE_INFO"&&(X.value=a.data.url,Q.value=a.data.title,Y())}),document.addEventListener("click",a=>{a.target.closest(".agent-selector")||(j.value=!1)})});const Y=async()=>{U.value=!0;try{const s=await chrome.runtime.sendMessage({type:"GET_AGENTS",payload:{userId:"default_user"}});if(s.success&&s.data){if(O.value=s.data.agents||[],$.value=s.data.recommended||null,$.value&&!w.value){const e=O.value.find(o=>o.id===$.value);e&&(w.value=e)}!w.value&&O.value.length>0&&(w.value=O.value[0])}}catch(s){console.error("åŠ è½½ Agent åˆ—è¡¨å¤±è´¥:",s)}finally{U.value=!1}},le=async()=>{try{const s=await chrome.runtime.sendMessage({type:"GET_SETTING",payload:{key:"model"}});s!=null&&s.success&&s.data?E.value=s.data:E.value="gpt-3.5-turbo"}catch(s){console.error("åŠ è½½æ¨¡å‹è®¾ç½®å¤±è´¥:",s),E.value="gpt-3.5-turbo"}},re=()=>{j.value=!j.value,j.value&&(P.value="")},ie=s=>{w.value=s,j.value=!1},ce=async()=>{const s=await chrome.runtime.sendMessage({type:"GET_MESSAGES",payload:{sessionId:m.value}});s.success&&(n.value=s.data.map(e=>({...e,blocks:e.blocks||[{type:"text",text:e.content}]})),T(I))},ue=s=>s.blocks.filter(o=>o.type==="text").map(o=>o.text).join(""),de=s=>JSON.stringify(s,null,2),R=async(s="")=>{if(!J.value)return null;try{const[e]=await chrome.tabs.query({active:!0,currentWindow:!0});if(!(e!=null&&e.id))return null;const o=await chrome.tabs.sendMessage(e.id,{type:"GET_PAGE_CONTEXT",payload:{userMessage:s}});if(o!=null&&o.success)return ae.value=o.data,o.data}catch(e){console.error("è·å–é¡µé¢ä¸Šä¸‹æ–‡å¤±è´¥:",e)}return null},pe=async(s,e)=>await D.execute(s,e),V=async(s,e)=>{s.status="approved";const o=await pe(s.name,JSON.stringify(s.input));let r="";try{const a=JSON.parse(o);r=a.summary||a.message||(a.success?"æ‰§è¡ŒæˆåŠŸ":"æ‰§è¡Œå¤±è´¥")}catch{r=o}await ve(s.name,o,r)},ve=async(s,e,o)=>{var g;const r={sessionId:m.value,role:"user",blocks:[{type:"text",text:`[å·¥å…· ${s} æ‰§è¡Œç»“æœ]: ${o}`}],createdAt:Date.now()};n.value.push(r),T(I),M.value=!0,x.value="";const a={sessionId:m.value,role:"assistant",blocks:[{type:"text",text:""}],createdAt:Date.now()};n.value.push(a);const u=n.value.length-1;let _="",A=null;try{const c=await R(),k=chrome.runtime.connect({name:"chat-stream"});k.onMessage.addListener(async b=>{if(b.type==="data"){const i=b.data;if(i.content){x.value+=i.content;const C=n.value[u].blocks.find(G=>G.type==="text");C&&C.type==="text"&&(C.text=x.value),T(I)}if(i.think&&i.think.reasoning_content&&(_=i.think.reasoning_content),i.toolCall&&i.toolCall.tool_name)try{A={type:"tool_use",id:`tool_${Date.now()}`,name:i.toolCall.tool_name,input:JSON.parse(i.toolCall.arguments||"{}"),status:"pending"}}catch(C){console.error("è§£æå·¥å…·å‚æ•°å¤±è´¥:",C)}}else if(b.type==="done"){if(M.value=!1,n.value[u].blocks=[],_&&(n.value[u].think=_),A){if(n.value[u].blocks.push(A),n.value[u].isComplete=!1,D.isBrowserTool(A.name)){k.disconnect(),T(()=>{V(A,u)});return}}else x.value&&n.value[u].blocks.push({type:"text",text:x.value}),n.value[u].isComplete=!0;k.disconnect(),T(I)}else if(b.type==="error"){console.error("æµå¼å“åº”é”™è¯¯:",b.error);const i=n.value[u].blocks.find(C=>C.type==="text");i&&i.type==="text"&&(i.text=`é”™è¯¯: ${b.error}`),M.value=!1,k.disconnect()}}),k.postMessage({agentId:((g=w.value)==null?void 0:g.id)||"",sessionId:m.value,message:`æµè§ˆå™¨å·¥å…· ${s} æ‰§è¡Œç»“æœ: ${e}`,model:E.value,userId:"default_user",role:"user",currentPageInfo:c,browserTools:D.getToolDefinitions()})}catch(c){console.error("å‘é€å·¥å…·ç»“æœå¤±è´¥:",c),M.value=!1}},Z=async()=>{if(!v.value.trim()||y.value||M.value||ne.value)return;const s=v.value.trim();v.value="";const e={sessionId:m.value,role:"user",blocks:[{type:"text",text:s}],createdAt:Date.now()};n.value.push(e),T(I),w.value&&w.value.id?await ge(s):await ye(s)},ge=async s=>{M.value=!0,x.value="";const e={sessionId:m.value,role:"assistant",blocks:[{type:"text",text:""}],createdAt:Date.now()};n.value.push(e);const o=n.value.length-1;let r="",a=null;try{const u=chrome.runtime.connect({name:"chat-stream"});u.onMessage.addListener(g=>{if(g.type==="data"){const c=g.data;if(c.content){x.value+=c.content;const k=n.value[o].blocks.find(b=>b.type==="text");k&&k.type==="text"&&(k.text=x.value),T(I)}if(c.think&&c.think.reasoning_content&&(r=c.think.reasoning_content),c.toolCall&&c.toolCall.tool_name)try{a={type:"tool_use",id:`tool_${Date.now()}`,name:c.toolCall.tool_name,input:JSON.parse(c.toolCall.arguments||"{}"),status:"pending"}}catch(k){console.error("è§£æå·¥å…·å‚æ•°å¤±è´¥:",k)}c.statistic&&console.log("Token ä½¿ç”¨ç»Ÿè®¡:",c.statistic.token_usage)}else if(g.type==="done"){if(M.value=!1,n.value[o].blocks=[],r&&(n.value[o].think=r),a){if(n.value[o].blocks.push(a),n.value[o].isComplete=!1,D.isBrowserTool(a.name)){u.disconnect(),T(()=>{V(a,o)});return}}else!r&&x.value&&n.value[o].blocks.push({type:"text",text:x.value}),n.value[o].isComplete=!0;u.disconnect(),T(I)}else if(g.type==="error"){console.error("æµå¼å“åº”é”™è¯¯:",g.error);const c=n.value[o].blocks.find(k=>k.type==="text");c&&c.type==="text"&&(c.text=`é”™è¯¯: ${g.error}`),M.value=!1,u.disconnect()}});const _=await R(s),A=D.getToolDefinitions();u.postMessage({agentId:w.value.id,sessionId:m.value,message:s,model:E.value,userId:"default_user",role:"user",currentPageInfo:_,browserTools:A})}catch(u){console.error("å‘é€æµå¼æ¶ˆæ¯å¤±è´¥:",u);const _=n.value[o].blocks.find(A=>A.type==="text");_&&_.type==="text"&&(_.text=`å‘é€å¤±è´¥: ${u}`),M.value=!1}},ye=async s=>{y.value=!0;try{const e=await chrome.runtime.sendMessage({type:"SEND_MESSAGE",payload:{sessionId:m.value,content:s}});if(e.success){const o={sessionId:m.value,role:"assistant",blocks:e.blocks||[{type:"text",text:e.response}],createdAt:Date.now(),isComplete:e.isComplete!==!1};n.value.push(o),T(I)}}catch(e){console.error("å‘é€æ¶ˆæ¯å¤±è´¥:",e)}finally{y.value=!1}},ee=async(s,e)=>{var A;const o=n.value[n.value.length-1];if(o&&o.role==="assistant"){const g=o.blocks.find(c=>c.type==="tool_use"&&c.id===s);g&&(g.status=e?"approved":"rejected")}M.value=!0,x.value="";const r={sessionId:m.value,role:"assistant",blocks:[{type:"text",text:""}],createdAt:Date.now()};n.value.push(r);const a=n.value.length-1;let u="",_=null;try{const g=chrome.runtime.connect({name:"chat-stream"});g.onMessage.addListener(b=>{if(b.type==="data"){const i=b.data;if(i.content){x.value+=i.content;const C=n.value[a].blocks.find(G=>G.type==="text");C&&C.type==="text"&&(C.text=x.value),T(I)}if(i.think&&i.think.reasoning_content&&(u+=i.think.reasoning_content),i.toolCall&&i.toolCall.tool_name)try{_={type:"tool_use",id:`tool_${Date.now()}`,name:i.toolCall.tool_name,input:JSON.parse(i.toolCall.arguments||"{}"),status:"pending"}}catch(C){console.error("è§£æå·¥å…·å‚æ•°å¤±è´¥:",C)}i.statistic&&console.log("Token ä½¿ç”¨ç»Ÿè®¡:",i.statistic.token_usage)}else if(b.type==="done"){if(M.value=!1,n.value[a].blocks=[],u&&(n.value[a].think=u),_){if(n.value[a].blocks.push(_),n.value[a].isComplete=!1,D.isBrowserTool(_.name)){g.disconnect(),T(()=>{V(_,a)});return}}else!u&&x.value&&n.value[a].blocks.push({type:"text",text:x.value}),n.value[a].isComplete=!0;g.disconnect(),T(I)}else if(b.type==="error"){console.error("æµå¼å“åº”é”™è¯¯:",b.error);const i=n.value[a].blocks.find(C=>C.type==="text");i&&i.type==="text"&&(i.text=`é”™è¯¯: ${b.error}`),M.value=!1,g.disconnect()}});const c=await R(),k=D.getToolDefinitions();g.postMessage({agentId:((A=w.value)==null?void 0:A.id)||"",sessionId:m.value,message:JSON.stringify({toolId:s,approved:e}),model:E.value,userId:"default_user",role:"function",currentPageInfo:c,browserTools:k})}catch(g){console.error("å¤„ç†å·¥å…·å“åº”å¤±è´¥:",g);const c=n.value[a].blocks.find(k=>k.type==="text");c&&c.type==="text"&&(c.text=`å‘é€å¤±è´¥: ${g}`),M.value=!1}},I=()=>{l.value&&(l.value.scrollTop=l.value.scrollHeight)},fe=()=>{console.log("togglePin clicked, current isPinned:",L.value),window.parent&&window.parent!==window?(console.log("Sending PIN_CHAT message to parent"),window.parent.postMessage({type:"PIN_CHAT"},"*"),L.value=!L.value):console.log("Not in iframe, cannot pin")},he=()=>{window.parent&&window.parent!==window?window.parent.postMessage({type:"CLOSE_CHAT"},"*"):window.close()},ke=()=>{const s=chrome.runtime.getURL(`chat.html?sessionId=${m.value}`);chrome.tabs.create({url:s}),window.parent&&window.parent.postMessage({type:"CLOSE_CHAT"},"*")},me=()=>{chrome.tabs.create({url:"https://github.com/anthropics/claude-code/issues"})},we=()=>{const s=chrome.runtime.getURL("options.html");chrome.tabs.create({url:s})},xe=async()=>{m.value=Date.now(),n.value=[],x.value="",M.value=!1,y.value=!1,T(()=>{var s;(s=h.value)==null||s.focus()})};return(s,e)=>(d(),p("div",Ee,[t("div",Ne,[t("div",je,[t("div",De,[e[4]||(e[4]=t("div",{class:"logo-icon"},[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[t("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),t("div",Le,[e[3]||(e[3]=t("h3",null,"AI Chat Assistant",-1)),t("div",Oe,[w.value?(d(),p("span",{key:0,class:"agent-badge",title:w.value.name},B(w.value.name),9,Pe)):S("",!0),E.value?(d(),p("span",$e,B(E.value),1)):S("",!0)])])]),t("div",He,[t("button",{class:"icon-btn",onClick:xe,title:"æ–°å»ºä¼šè¯"},[...e[5]||(e[5]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[t("line",{x1:"12",y1:"5",x2:"12",y2:"19","stroke-width":"2","stroke-linecap":"round"}),t("line",{x1:"5",y1:"12",x2:"19",y2:"12","stroke-width":"2","stroke-linecap":"round"})],-1)])]),t("button",{class:"icon-btn",onClick:me,title:"å¸®åŠ©æ–‡æ¡£"},[...e[6]||(e[6]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[t("circle",{cx:"12",cy:"12",r:"10","stroke-width":"2"}),t("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),t("line",{x1:"12",y1:"17",x2:"12.01",y2:"17","stroke-width":"2","stroke-linecap":"round"})],-1)])]),t("button",{class:"icon-btn",onClick:we,title:"è®¾ç½®"},[...e[7]||(e[7]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[t("circle",{cx:"12",cy:"12",r:"3","stroke-width":"2"}),t("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])]),J.value?(d(),p("button",{key:0,class:H(["icon-btn",{active:L.value}]),onClick:fe,title:"å›ºå®šçª—å£"},[...e[8]||(e[8]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[t("path",{d:"M16 4v8l3 3-2 2-3-3-4 4-2-2 4-4-3-3 2-2 3 3V4h2z","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])],2)):S("",!0),J.value?(d(),p("button",{key:1,class:"icon-btn",onClick:ke,title:"å…¨å±æ‰“å¼€"},[...e[9]||(e[9]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[t("path",{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])):S("",!0),t("button",{class:"icon-btn",onClick:he,title:"å…³é—­"},[...e[10]||(e[10]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18","stroke-width":"2","stroke-linecap":"round"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18","stroke-width":"2","stroke-linecap":"round"})],-1)])])])]),t("div",{class:"chat-messages",ref_key:"messagesContainer",ref:l},[n.value.length===0?(d(),p("div",ze,[...e[11]||(e[11]=[t("p",null,"å¼€å§‹å¯¹è¯å§",-1)])])):S("",!0),(d(!0),p(z,null,q(n.value,o=>(d(),p("div",{key:o.id||o.createdAt,class:H(["message",o.role])},[o.role==="user"?(d(),p("div",Ue,B(ue(o)),1)):(d(),p("div",Je,[o.think?(d(),p("div",Re,[e[12]||(e[12]=t("div",{class:"think-header"},[t("span",{class:"think-icon"},"ğŸ’­"),t("span",{class:"think-label"},"æ€è€ƒè¿‡ç¨‹")],-1)),t("div",Ve,B(o.think),1)])):S("",!0),(d(!0),p(z,null,q(o.blocks,(r,a)=>(d(),p(z,{key:a},[r.type==="text"?(d(),p("div",Ge,[e[13]||(e[13]=t("span",{class:"block-indicator text-indicator"},"â–¶",-1)),t("span",qe,B(r.text),1)])):r.type==="tool_use"?(d(),p("div",Fe,[t("div",Ke,[e[14]||(e[14]=t("span",{class:"block-indicator tool-indicator"},"âš™",-1)),t("span",Xe,B(r.name),1),r.status==="approved"?(d(),p("span",Qe,"å·²æ‰¹å‡†")):r.status==="rejected"?(d(),p("span",We,"å·²æ‹’ç»")):S("",!0)]),t("pre",Ye,B(de(r.input)),1),r.status==="pending"&&!y.value?(d(),p("div",Ze,[t("button",{class:"btn btn-approve",onClick:u=>ee(r.id,!0)},"Approve",8,et),t("button",{class:"btn btn-reject",onClick:u=>ee(r.id,!1)},"Reject",8,tt)])):S("",!0)])):S("",!0)],64))),128))]))],2))),128)),y.value?(d(),p("div",st,[...e[15]||(e[15]=[t("div",{class:"assistant-content"},[t("div",{class:"message-box assistant-box typing"},[t("span"),t("span"),t("span")])],-1)])])):S("",!0)],512),t("div",ot,[t("div",{class:"agent-selector",onClick:re},[t("div",{class:H(["agent-selector-btn",{active:j.value}])},[e[16]||(e[16]=t("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"})],-1)),w.value?(d(),p("span",nt)):S("",!0)],2),j.value?(d(),p("div",at,[t("div",lt,[se(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>P.value=o),placeholder:"æœç´¢ Agent...",onClick:e[1]||(e[1]=F(()=>{},["stop"]))},null,512),[[oe,P.value]])]),t("div",rt,[U.value?(d(),p("div",it,[...e[17]||(e[17]=[t("div",{class:"loading-spinner"},null,-1),t("span",null,"åŠ è½½ä¸­...",-1)])])):W.value.length===0?(d(),p("div",ct," æš‚æ— å¯ç”¨ Agent ")):(d(!0),p(z,{key:2},q(W.value,o=>{var r,a;return d(),p("div",{key:o.id,class:H(["agent-dropdown-item",{selected:((r=w.value)==null?void 0:r.id)===o.id,recommended:o.id===$.value}]),onClick:F(u=>ie(o),["stop"])},[e[19]||(e[19]=t("div",{class:"agent-dropdown-avatar"},[t("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"})])],-1)),t("div",dt,[t("div",pt,[Se(B(o.name)+" ",1),o.id===$.value?(d(),p("span",vt,"æ¨è")):S("",!0)]),t("div",gt,B(o.description),1)]),((a=w.value)==null?void 0:a.id)===o.id?(d(),p("div",yt,[...e[18]||(e[18]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[t("polyline",{points:"20 6 9 17 4 12","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])):S("",!0)],10,ut)}),128))])])):S("",!0)]),se(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=o=>v.value=o),onKeydown:Me(F(Z,["exact","prevent"]),["enter"]),placeholder:"è¾“å…¥æ¶ˆæ¯... (Enterå‘é€)",rows:"1",ref_key:"inputArea",ref:h},null,40,ft),[[oe,v.value]]),t("button",{class:"send-btn",onClick:Z,disabled:!v.value.trim()||y.value},[...e[20]||(e[20]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[t("line",{x1:"22",y1:"2",x2:"11",y2:"13","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),t("polygon",{points:"22 2 15 22 11 13 2 9 22 2","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])],8,ht)])])]))}}),mt=Ae(kt,[["__scopeId","data-v-356243de"]]),wt=Ie(mt);wt.mount("#app");

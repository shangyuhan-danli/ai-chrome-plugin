var _e=Object.defineProperty;var xe=(B,a,y)=>a in B?_e(B,a,{enumerable:!0,configurable:!0,writable:!0,value:y}):B[a]=y;var Z=(B,a,y)=>xe(B,typeof a!="symbol"?a+"":a,y);import{d as Ce,f as be,m as T,o as u,c as d,b as t,t as E,g as M,n as G,F as H,r as J,h as ee,v as te,w as V,p as Te,l as k,q as R,s as Me,_ as Ae,e as Se}from"./chunks/_plugin-vue_export-helper-C6Ao9Pha.js";class Ee{constructor(){Z(this,"tools",new Map);this.registerBuiltinTools()}registerBuiltinTools(){this.register({name:"page_action",description:"åœ¨ç”¨æˆ·å½“å‰æµè§ˆçš„ç½‘é¡µä¸Šæ‰§è¡Œæ“ä½œï¼Œå¦‚å¡«å……è¾“å…¥æ¡†ã€ç‚¹å‡»æŒ‰é’®ã€é«˜äº®æ–‡å­—ç­‰",execute:async(a,y)=>{const c=a.actions||[a],h=await chrome.tabs.sendMessage(y,{type:"EXECUTE_BATCH_ACTIONS",payload:c});return(h==null?void 0:h.data)||{success:!1,error:"æ‰§è¡Œå¤±è´¥"}}}),this.register({name:"request_more_elements",description:"å½“å‰é¡µé¢å…ƒç´ ä¿¡æ¯ä¸è¶³æ—¶ï¼Œè¯·æ±‚ç‰¹å®šåŒºåŸŸæˆ–ç±»å‹çš„æ›´å¤šå…ƒç´ ",execute:async(a,y)=>{const c=await chrome.tabs.sendMessage(y,{type:"REQUEST_MORE_ELEMENTS",payload:a});return{success:!0,elements:(c==null?void 0:c.data)||[]}}}),this.register({name:"get_page_elements",description:"è·å–å½“å‰é¡µé¢çš„å¯äº¤äº’å…ƒç´ åˆ—è¡¨",execute:async(a,y)=>{const c=await chrome.tabs.sendMessage(y,{type:"GET_PAGE_CONTEXT",payload:{userMessage:a.userMessage||""}});return(c==null?void 0:c.data)||null}}),this.register({name:"execute_action",description:"æ‰§è¡Œå•ä¸ªé¡µé¢æ“ä½œ",execute:async(a,y)=>{const c=await chrome.tabs.sendMessage(y,{type:"EXECUTE_PAGE_ACTION",payload:a});return(c==null?void 0:c.data)||{success:!1,error:"æ‰§è¡Œå¤±è´¥"}}}),this.register({name:"get_selected_text",description:"è·å–ç”¨æˆ·åœ¨é¡µé¢ä¸Šé€‰ä¸­çš„æ–‡å­—",execute:async(a,y)=>{const c=await chrome.tabs.sendMessage(y,{type:"GET_SELECTED_TEXT"});return{success:!0,text:(c==null?void 0:c.data)||""}}}),this.register({name:"clear_ai_styles",description:"æ¸…é™¤ AI åœ¨é¡µé¢ä¸Šæ·»åŠ çš„æ‰€æœ‰é«˜äº®å’Œä¸‹åˆ’çº¿æ ·å¼",execute:async(a,y)=>{const c=await chrome.tabs.sendMessage(y,{type:"CLEAR_AI_STYLES"});return{success:(c==null?void 0:c.success)||!1}}})}register(a){this.tools.set(a.name,a)}unregister(a){this.tools.delete(a)}isBrowserTool(a){return this.tools.has(a)}getToolNames(){return Array.from(this.tools.keys())}getToolDefinitions(){return Array.from(this.tools.values()).map(a=>({name:a.name,description:a.description}))}async execute(a,y){const c=this.tools.get(a);if(!c)return JSON.stringify({success:!1,error:`æœªçŸ¥çš„æµè§ˆå™¨å·¥å…·: ${a}`});try{const[h]=await chrome.tabs.query({active:!0,currentWindow:!0});if(!(h!=null&&h.id))return JSON.stringify({success:!1,error:"æ— æ³•è·å–å½“å‰æ ‡ç­¾é¡µ"});let n;try{n=JSON.parse(y)}catch{return JSON.stringify({success:!1,error:"æ— æ•ˆçš„å‚æ•°æ ¼å¼"})}const _=await c.execute(n,h.id);return JSON.stringify(_)}catch(h){return console.error(`æ‰§è¡Œå·¥å…· ${a} å¤±è´¥:`,h),JSON.stringify({success:!1,error:String(h)})}}}const q=new Ee,Ie={class:"chat-wrapper"},Be={class:"chat-container"},Ne={class:"chat-header"},Le={class:"header-left"},Oe={class:"header-title"},Pe={class:"header-badges"},De=["title"],Ge={key:1,class:"model-badge"},He={class:"header-right"},je={key:0,class:"empty-state"},ze={key:0,class:"message-box user-box"},Ue={key:1,class:"assistant-content"},$e={key:0,class:"think-block"},Je={class:"think-content"},Ve={key:0,class:"message-box assistant-box"},Re={class:"block-content"},qe={key:1,class:"tool-block"},Fe={class:"tool-header"},Xe={class:"tool-name"},Ke={key:0,class:"tool-badge approved"},Qe={key:1,class:"tool-badge rejected"},We={class:"tool-params"},Ye={key:0,class:"tool-actions"},Ze=["onClick"],et=["onClick"],tt={key:1,class:"message assistant"},st={class:"chat-input-area"},ot={key:0,class:"agent-selected-indicator"},nt={key:0,class:"agent-dropdown-menu"},at={class:"agent-dropdown-header"},lt={class:"agent-dropdown-list"},rt={key:0,class:"agent-dropdown-loading"},it={key:1,class:"agent-dropdown-empty"},ct=["onClick"],ut={class:"agent-dropdown-info"},dt={class:"agent-dropdown-name"},pt={key:0,class:"recommended-tag"},vt={class:"agent-dropdown-desc"},gt={key:0,class:"agent-check"},ft=["onKeydown"],yt=["disabled"],ht=Ce({__name:"App",setup(B){const a=k(),y=k(),c=k(""),h=k(!1),n=k([]),_=k(1),L=k(!1),se=R(()=>{if(n.value.length===0)return!1;const s=n.value[n.value.length-1];return s.role!=="assistant"?!1:s.blocks.some(e=>e.type==="tool_use"&&e.status==="pending")}),O=k([]),m=k(null),N=k(!1),P=k(""),j=k(!1),D=k(null),F=k(""),X=k(""),I=k("gpt-3.5-turbo"),w=k(""),C=k(!1),oe=k(null),z=R(()=>window.self!==window.top),K=R(()=>{if(!P.value)return O.value;const s=P.value.toLowerCase();return O.value.filter(e=>{var o;return e.name.toLowerCase().includes(s)||e.description.toLowerCase().includes(s)||((o=e.tags)==null?void 0:o.some(r=>r.toLowerCase().includes(s)))})});be(async()=>{const s=new URLSearchParams(window.location.search),e=s.get("sessionId");e&&(_.value=parseInt(e));const o=s.get("pageUrl"),r=s.get("pageTitle");o&&(F.value=decodeURIComponent(o)),r&&(X.value=decodeURIComponent(r)),await re(),await Q(),await ne(),T(()=>{var l;(l=y.value)==null||l.focus()}),window.addEventListener("message",l=>{l.data.type==="PIN_STATUS_CHANGED"&&(L.value=l.data.isPinned),l.data.type==="PAGE_INFO"&&(F.value=l.data.url,X.value=l.data.title,Q())}),document.addEventListener("click",l=>{l.target.closest(".agent-selector")||(N.value=!1)})});const Q=async()=>{j.value=!0;try{const s=await chrome.runtime.sendMessage({type:"GET_AGENTS",payload:{userId:"default_user"}});if(s.success&&s.data){if(O.value=s.data.agents||[],D.value=s.data.recommended||null,D.value&&!m.value){const e=O.value.find(o=>o.id===D.value);e&&(m.value=e)}!m.value&&O.value.length>0&&(m.value=O.value[0])}}catch(s){console.error("åŠ è½½ Agent åˆ—è¡¨å¤±è´¥:",s)}finally{j.value=!1}},ne=async()=>{try{const s=await chrome.runtime.sendMessage({type:"GET_SETTING",payload:{key:"model"}});s!=null&&s.success&&s.data?I.value=s.data:I.value="gpt-3.5-turbo"}catch(s){console.error("åŠ è½½æ¨¡å‹è®¾ç½®å¤±è´¥:",s),I.value="gpt-3.5-turbo"}},ae=()=>{N.value=!N.value,N.value&&(P.value="")},le=s=>{m.value=s,N.value=!1},re=async()=>{const s=await chrome.runtime.sendMessage({type:"GET_MESSAGES",payload:{sessionId:_.value}});s.success&&(n.value=s.data.map(e=>({...e,blocks:e.blocks||[{type:"text",text:e.content}]})),T(A))},ie=s=>s.blocks.filter(o=>o.type==="text").map(o=>o.text).join(""),ce=s=>JSON.stringify(s,null,2),U=async(s="")=>{if(!z.value)return null;try{const[e]=await chrome.tabs.query({active:!0,currentWindow:!0});if(!(e!=null&&e.id))return null;const o=await chrome.tabs.sendMessage(e.id,{type:"GET_PAGE_CONTEXT",payload:{userMessage:s}});if(o!=null&&o.success)return oe.value=o.data,o.data}catch(e){console.error("è·å–é¡µé¢ä¸Šä¸‹æ–‡å¤±è´¥:",e)}return null},ue=async(s,e)=>await q.execute(s,e),$=async(s,e)=>{s.status="approved";const o=await ue(s.name,JSON.stringify(s.input));await de(s.id,o)},de=async(s,e)=>{var b;C.value=!0,w.value="";const o={sessionId:_.value,role:"assistant",blocks:[{type:"text",text:""}],createdAt:Date.now()};n.value.push(o);const r=n.value.length-1;let l="",v=null;try{const x=await U(),i=chrome.runtime.connect({name:"chat-stream"});i.onMessage.addListener(async g=>{if(g.type==="data"){const p=g.data;if(p.content){w.value+=p.content;const f=n.value[r].blocks.find(S=>S.type==="text");f&&f.type==="text"&&(f.text=w.value),T(A)}if(p.think&&p.think.reasoning_content&&(l=p.think.reasoning_content),p.toolCall&&p.toolCall.tool_name)try{v={type:"tool_use",id:`tool_${Date.now()}`,name:p.toolCall.tool_name,input:JSON.parse(p.toolCall.arguments||"{}"),status:"pending"}}catch(f){console.error("è§£æå·¥å…·å‚æ•°å¤±è´¥:",f)}}else if(g.type==="done"){if(C.value=!1,n.value[r].blocks=[],l&&(n.value[r].think=l),v){if(n.value[r].blocks.push(v),n.value[r].isComplete=!1,q.isBrowserTool(v.name)){i.disconnect(),T(()=>{$(v,r)});return}}else w.value&&n.value[r].blocks.push({type:"text",text:w.value}),n.value[r].isComplete=!0;i.disconnect(),T(A)}else if(g.type==="error"){console.error("æµå¼å“åº”é”™è¯¯:",g.error);const p=n.value[r].blocks.find(f=>f.type==="text");p&&p.type==="text"&&(p.text=`é”™è¯¯: ${g.error}`),C.value=!1,i.disconnect()}}),i.postMessage({agentId:((b=m.value)==null?void 0:b.id)||"",sessionId:_.value,message:JSON.stringify({tool_id:s,result:e}),model:I.value,userId:"default_user",role:"function",currentPageInfo:x})}catch(x){console.error("å‘é€å·¥å…·ç»“æœå¤±è´¥:",x),C.value=!1}},W=async()=>{if(!c.value.trim()||h.value||C.value||se.value)return;const s=c.value.trim();c.value="";const e={sessionId:_.value,role:"user",blocks:[{type:"text",text:s}],createdAt:Date.now()};n.value.push(e),T(A),m.value&&m.value.id?await pe(s):await ve(s)},pe=async s=>{C.value=!0,w.value="";const e={sessionId:_.value,role:"assistant",blocks:[{type:"text",text:""}],createdAt:Date.now()};n.value.push(e);const o=n.value.length-1;let r="",l=null;try{const v=chrome.runtime.connect({name:"chat-stream"});v.onMessage.addListener(x=>{if(x.type==="data"){const i=x.data;if(i.content){w.value+=i.content;const g=n.value[o].blocks.find(p=>p.type==="text");g&&g.type==="text"&&(g.text=w.value),T(A)}if(i.think&&i.think.reasoning_content&&(r=i.think.reasoning_content),i.toolCall&&i.toolCall.tool_name)try{l={type:"tool_use",id:`tool_${Date.now()}`,name:i.toolCall.tool_name,input:JSON.parse(i.toolCall.arguments||"{}"),status:"pending"}}catch(g){console.error("è§£æå·¥å…·å‚æ•°å¤±è´¥:",g)}i.statistic&&console.log("Token ä½¿ç”¨ç»Ÿè®¡:",i.statistic.token_usage)}else if(x.type==="done"){if(C.value=!1,n.value[o].blocks=[],r&&(n.value[o].think=r),l){if(n.value[o].blocks.push(l),n.value[o].isComplete=!1,isBrowserTool(l.name)){v.disconnect(),T(()=>{$(l,o)});return}}else!r&&w.value&&n.value[o].blocks.push({type:"text",text:w.value}),n.value[o].isComplete=!0;v.disconnect(),T(A)}else if(x.type==="error"){console.error("æµå¼å“åº”é”™è¯¯:",x.error);const i=n.value[o].blocks.find(g=>g.type==="text");i&&i.type==="text"&&(i.text=`é”™è¯¯: ${x.error}`),C.value=!1,v.disconnect()}});const b=await U(s);v.postMessage({agentId:m.value.id,sessionId:_.value,message:s,model:I.value,userId:"default_user",role:"user",currentPageInfo:b})}catch(v){console.error("å‘é€æµå¼æ¶ˆæ¯å¤±è´¥:",v);const b=n.value[o].blocks.find(x=>x.type==="text");b&&b.type==="text"&&(b.text=`å‘é€å¤±è´¥: ${v}`),C.value=!1}},ve=async s=>{h.value=!0;try{const e=await chrome.runtime.sendMessage({type:"SEND_MESSAGE",payload:{sessionId:_.value,content:s}});if(e.success){const o={sessionId:_.value,role:"assistant",blocks:e.blocks||[{type:"text",text:e.response}],createdAt:Date.now(),isComplete:e.isComplete!==!1};n.value.push(o),T(A)}}catch(e){console.error("å‘é€æ¶ˆæ¯å¤±è´¥:",e)}finally{h.value=!1}},Y=async(s,e)=>{var x;const o=n.value[n.value.length-1];if(o&&o.role==="assistant"){const i=o.blocks.find(g=>g.type==="tool_use"&&g.id===s);i&&(i.status=e?"approved":"rejected")}C.value=!0,w.value="";const r={sessionId:_.value,role:"assistant",blocks:[{type:"text",text:""}],createdAt:Date.now()};n.value.push(r);const l=n.value.length-1;let v="",b=null;try{const i=chrome.runtime.connect({name:"chat-stream"});i.onMessage.addListener(p=>{if(p.type==="data"){const f=p.data;if(f.content){w.value+=f.content;const S=n.value[l].blocks.find(we=>we.type==="text");S&&S.type==="text"&&(S.text=w.value),T(A)}if(f.think&&f.think.reasoning_content&&(v+=f.think.reasoning_content),f.toolCall&&f.toolCall.tool_name)try{b={type:"tool_use",id:`tool_${Date.now()}`,name:f.toolCall.tool_name,input:JSON.parse(f.toolCall.arguments||"{}"),status:"pending"}}catch(S){console.error("è§£æå·¥å…·å‚æ•°å¤±è´¥:",S)}f.statistic&&console.log("Token ä½¿ç”¨ç»Ÿè®¡:",f.statistic.token_usage)}else if(p.type==="done"){if(C.value=!1,n.value[l].blocks=[],v&&(n.value[l].think=v),b){if(n.value[l].blocks.push(b),n.value[l].isComplete=!1,q.isBrowserTool(b.name)){i.disconnect(),T(()=>{$(b,l)});return}}else!v&&w.value&&n.value[l].blocks.push({type:"text",text:w.value}),n.value[l].isComplete=!0;i.disconnect(),T(A)}else if(p.type==="error"){console.error("æµå¼å“åº”é”™è¯¯:",p.error);const f=n.value[l].blocks.find(S=>S.type==="text");f&&f.type==="text"&&(f.text=`é”™è¯¯: ${p.error}`),C.value=!1,i.disconnect()}});const g=await U();i.postMessage({agentId:((x=m.value)==null?void 0:x.id)||"",sessionId:_.value,message:JSON.stringify({toolId:s,approved:e}),model:I.value,userId:"default_user",role:"function",currentPageInfo:g})}catch(i){console.error("å¤„ç†å·¥å…·å“åº”å¤±è´¥:",i);const g=n.value[l].blocks.find(p=>p.type==="text");g&&g.type==="text"&&(g.text=`å‘é€å¤±è´¥: ${i}`),C.value=!1}},A=()=>{a.value&&(a.value.scrollTop=a.value.scrollHeight)},ge=()=>{console.log("togglePin clicked, current isPinned:",L.value),window.parent&&window.parent!==window?(console.log("Sending PIN_CHAT message to parent"),window.parent.postMessage({type:"PIN_CHAT"},"*"),L.value=!L.value):console.log("Not in iframe, cannot pin")},fe=()=>{window.parent&&window.parent!==window?window.parent.postMessage({type:"CLOSE_CHAT"},"*"):window.close()},ye=()=>{const s=chrome.runtime.getURL(`chat.html?sessionId=${_.value}`);chrome.tabs.create({url:s}),window.parent&&window.parent.postMessage({type:"CLOSE_CHAT"},"*")},he=()=>{chrome.tabs.create({url:"https://github.com/anthropics/claude-code/issues"})},ke=()=>{const s=chrome.runtime.getURL("options.html");chrome.tabs.create({url:s})},me=async()=>{_.value=Date.now(),n.value=[],w.value="",C.value=!1,h.value=!1,T(()=>{var s;(s=y.value)==null||s.focus()})};return(s,e)=>(u(),d("div",Ie,[t("div",Be,[t("div",Ne,[t("div",Le,[e[4]||(e[4]=t("div",{class:"logo-icon"},[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[t("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),t("div",Oe,[e[3]||(e[3]=t("h3",null,"AI Chat Assistant",-1)),t("div",Pe,[m.value?(u(),d("span",{key:0,class:"agent-badge",title:m.value.name},E(m.value.name),9,De)):M("",!0),I.value?(u(),d("span",Ge,E(I.value),1)):M("",!0)])])]),t("div",He,[t("button",{class:"icon-btn",onClick:me,title:"æ–°å»ºä¼šè¯"},[...e[5]||(e[5]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[t("line",{x1:"12",y1:"5",x2:"12",y2:"19","stroke-width":"2","stroke-linecap":"round"}),t("line",{x1:"5",y1:"12",x2:"19",y2:"12","stroke-width":"2","stroke-linecap":"round"})],-1)])]),t("button",{class:"icon-btn",onClick:he,title:"å¸®åŠ©æ–‡æ¡£"},[...e[6]||(e[6]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[t("circle",{cx:"12",cy:"12",r:"10","stroke-width":"2"}),t("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),t("line",{x1:"12",y1:"17",x2:"12.01",y2:"17","stroke-width":"2","stroke-linecap":"round"})],-1)])]),t("button",{class:"icon-btn",onClick:ke,title:"è®¾ç½®"},[...e[7]||(e[7]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[t("circle",{cx:"12",cy:"12",r:"3","stroke-width":"2"}),t("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])]),z.value?(u(),d("button",{key:0,class:G(["icon-btn",{active:L.value}]),onClick:ge,title:"å›ºå®šçª—å£"},[...e[8]||(e[8]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[t("path",{d:"M16 4v8l3 3-2 2-3-3-4 4-2-2 4-4-3-3 2-2 3 3V4h2z","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])],2)):M("",!0),z.value?(u(),d("button",{key:1,class:"icon-btn",onClick:ye,title:"å…¨å±æ‰“å¼€"},[...e[9]||(e[9]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[t("path",{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])):M("",!0),t("button",{class:"icon-btn",onClick:fe,title:"å…³é—­"},[...e[10]||(e[10]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18","stroke-width":"2","stroke-linecap":"round"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18","stroke-width":"2","stroke-linecap":"round"})],-1)])])])]),t("div",{class:"chat-messages",ref_key:"messagesContainer",ref:a},[n.value.length===0?(u(),d("div",je,[...e[11]||(e[11]=[t("p",null,"å¼€å§‹å¯¹è¯å§",-1)])])):M("",!0),(u(!0),d(H,null,J(n.value,o=>(u(),d("div",{key:o.id||o.createdAt,class:G(["message",o.role])},[o.role==="user"?(u(),d("div",ze,E(ie(o)),1)):(u(),d("div",Ue,[o.think?(u(),d("div",$e,[e[12]||(e[12]=t("div",{class:"think-header"},[t("span",{class:"think-icon"},"ğŸ’­"),t("span",{class:"think-label"},"æ€è€ƒè¿‡ç¨‹")],-1)),t("div",Je,E(o.think),1)])):M("",!0),(u(!0),d(H,null,J(o.blocks,(r,l)=>(u(),d(H,{key:l},[r.type==="text"?(u(),d("div",Ve,[e[13]||(e[13]=t("span",{class:"block-indicator text-indicator"},"â–¶",-1)),t("span",Re,E(r.text),1)])):r.type==="tool_use"?(u(),d("div",qe,[t("div",Fe,[e[14]||(e[14]=t("span",{class:"block-indicator tool-indicator"},"âš™",-1)),t("span",Xe,E(r.name),1),r.status==="approved"?(u(),d("span",Ke,"å·²æ‰¹å‡†")):r.status==="rejected"?(u(),d("span",Qe,"å·²æ‹’ç»")):M("",!0)]),t("pre",We,E(ce(r.input)),1),r.status==="pending"&&!h.value?(u(),d("div",Ye,[t("button",{class:"btn btn-approve",onClick:v=>Y(r.id,!0)},"Approve",8,Ze),t("button",{class:"btn btn-reject",onClick:v=>Y(r.id,!1)},"Reject",8,et)])):M("",!0)])):M("",!0)],64))),128))]))],2))),128)),h.value?(u(),d("div",tt,[...e[15]||(e[15]=[t("div",{class:"assistant-content"},[t("div",{class:"message-box assistant-box typing"},[t("span"),t("span"),t("span")])],-1)])])):M("",!0)],512),t("div",st,[t("div",{class:"agent-selector",onClick:ae},[t("div",{class:G(["agent-selector-btn",{active:N.value}])},[e[16]||(e[16]=t("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"})],-1)),m.value?(u(),d("span",ot)):M("",!0)],2),N.value?(u(),d("div",nt,[t("div",at,[ee(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>P.value=o),placeholder:"æœç´¢ Agent...",onClick:e[1]||(e[1]=V(()=>{},["stop"]))},null,512),[[te,P.value]])]),t("div",lt,[j.value?(u(),d("div",rt,[...e[17]||(e[17]=[t("div",{class:"loading-spinner"},null,-1),t("span",null,"åŠ è½½ä¸­...",-1)])])):K.value.length===0?(u(),d("div",it," æš‚æ— å¯ç”¨ Agent ")):(u(!0),d(H,{key:2},J(K.value,o=>{var r,l;return u(),d("div",{key:o.id,class:G(["agent-dropdown-item",{selected:((r=m.value)==null?void 0:r.id)===o.id,recommended:o.id===D.value}]),onClick:V(v=>le(o),["stop"])},[e[19]||(e[19]=t("div",{class:"agent-dropdown-avatar"},[t("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"})])],-1)),t("div",ut,[t("div",dt,[Me(E(o.name)+" ",1),o.id===D.value?(u(),d("span",pt,"æ¨è")):M("",!0)]),t("div",vt,E(o.description),1)]),((l=m.value)==null?void 0:l.id)===o.id?(u(),d("div",gt,[...e[18]||(e[18]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[t("polyline",{points:"20 6 9 17 4 12","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])):M("",!0)],10,ct)}),128))])])):M("",!0)]),ee(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=o=>c.value=o),onKeydown:Te(V(W,["exact","prevent"]),["enter"]),placeholder:"è¾“å…¥æ¶ˆæ¯... (Enterå‘é€)",rows:"1",ref_key:"inputArea",ref:y},null,40,ft),[[te,c.value]]),t("button",{class:"send-btn",onClick:W,disabled:!c.value.trim()||h.value},[...e[20]||(e[20]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[t("line",{x1:"22",y1:"2",x2:"11",y2:"13","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),t("polygon",{points:"22 2 15 22 11 13 2 9 22 2","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])],8,yt)])])]))}}),kt=Ae(ht,[["__scopeId","data-v-bbda4bd7"]]),mt=Se(kt);mt.mount("#app");

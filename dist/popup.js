import{d as p,o as h,c as u,a as d,b as t,w as m,_ as w,e as k}from"./chunks/_plugin-vue_export-helper-ByXR5g9Y.js";const y={class:"popup-container"},f={class:"content"},g={class:"footer"},C=p({__name:"App",setup(S){const c=async()=>{try{const[e]=await chrome.tabs.query({active:!0,currentWindow:!0});if(e!=null&&e.id)try{await chrome.tabs.sendMessage(e.id,{type:"OPEN_CHAT",tabId:e.id})}catch{console.log("Content script未注入，正在注入..."),await chrome.scripting.executeScript({target:{tabId:e.id},files:["content.js"]}),await chrome.scripting.insertCSS({target:{tabId:e.id},files:["content.css"]}),await new Promise(s=>setTimeout(s,100)),await chrome.tabs.sendMessage(e.id,{type:"OPEN_CHAT",tabId:e.id})}window.close()}catch(e){console.error("打开聊天窗口失败:",e),alert("打开聊天窗口失败，请刷新页面后重试")}},l=async()=>{try{const[e]=await chrome.tabs.query({active:!0,currentWindow:!0}),a=e==null?void 0:e.id,s=(e==null?void 0:e.url)||"",o=(e==null?void 0:e.title)||"新对话";let i;if(a){const n=await chrome.runtime.sendMessage({type:"GET_SESSION_BY_TAB",payload:{tabId:a}});n.success&&n.data?i=n.data.id:i=(await chrome.runtime.sendMessage({type:"CREATE_SESSION",payload:{title:o,tabId:a,pageUrl:s,pageTitle:o}})).data.id}else i=(await chrome.runtime.sendMessage({type:"CREATE_SESSION",payload:{title:o,pageUrl:s,pageTitle:o}})).data.id;const v=chrome.runtime.getURL(`chat.html?sessionId=${i}`);await chrome.tabs.create({url:v}),window.close()}catch(e){console.error("全屏打开失败:",e),alert("全屏打开失败，请重试")}},r=()=>{chrome.runtime.openOptionsPage()};return(e,a)=>(h(),u("div",y,[a[5]||(a[5]=d('<div class="header" data-v-171a45e5><div class="header-content" data-v-171a45e5><div class="logo" data-v-171a45e5><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" data-v-171a45e5><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-171a45e5></path></svg></div><div class="header-text" data-v-171a45e5><h2 data-v-171a45e5>AI Chat Assistant</h2><p data-v-171a45e5>智能对话助手</p></div></div></div>',1)),t("div",f,[t("div",{class:"actions-section"},[t("button",{class:"action-btn primary",onClick:c},[...a[0]||(a[0]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[t("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),t("span",null,"打开聊天窗口（内嵌）",-1)])]),t("button",{class:"action-btn secondary",onClick:l},[...a[1]||(a[1]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[t("path",{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),t("span",null,"全屏打开",-1)])]),t("button",{class:"action-btn secondary",onClick:r},[...a[2]||(a[2]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[t("circle",{cx:"12",cy:"12",r:"3","stroke-width":"2"}),t("path",{d:"M12 1v6m0 6v6M1 12h6m6 0h6","stroke-width":"2","stroke-linecap":"round"})],-1),t("span",null,"设置与管理",-1)])])]),a[4]||(a[4]=d('<div class="divider" data-v-171a45e5></div><div class="info-section" data-v-171a45e5><div class="info-item" data-v-171a45e5><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" data-v-171a45e5><circle cx="12" cy="12" r="10" stroke-width="2" data-v-171a45e5></circle><line x1="12" y1="16" x2="12" y2="12" stroke-width="2" stroke-linecap="round" data-v-171a45e5></line><line x1="12" y1="8" x2="12.01" y2="8" stroke-width="2" stroke-linecap="round" data-v-171a45e5></line></svg><div class="info-text" data-v-171a45e5><div class="info-title" data-v-171a45e5>使用提示</div><div class="info-desc" data-v-171a45e5>内嵌模式：固定在页面右侧<br data-v-171a45e5>全屏模式：在新标签页打开</div></div></div></div><div class="divider" data-v-171a45e5></div>',3)),t("div",g,[a[3]||(a[3]=t("div",{class:"version"},"v1.0.0",-1)),t("a",{href:"#",onClick:m(r,["prevent"]),class:"footer-link"},"帮助文档")])])]))}}),x=w(C,[["__scopeId","data-v-171a45e5"]]);k(x).mount("#app");

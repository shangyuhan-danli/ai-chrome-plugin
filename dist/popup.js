import{d as v,o as p,c as h,a as d,b as t,w as u,_ as b,e as m}from"./chunks/_plugin-vue_export-helper-C6Ao9Pha.js";const w={class:"popup-container"},k={class:"content"},f={class:"footer"},g=v({__name:"App",setup(C){const r=async()=>{var i;try{const e=await chrome.runtime.sendMessage({type:"GET_SESSIONS"});let o=1;if(e!=null&&e.success&&((i=e.data)==null?void 0:i.length)>0)o=e.data[0].id;else{const a=await chrome.runtime.sendMessage({type:"CREATE_SESSION",payload:{title:`新对话 ${new Date().toLocaleString("zh-CN")}`}});a!=null&&a.success&&(o=a.data.id)}const[s]=await chrome.tabs.query({active:!0,currentWindow:!0});if(s!=null&&s.id)try{await chrome.tabs.sendMessage(s.id,{type:"OPEN_CHAT",sessionId:o})}catch{console.log("Content script未注入，正在注入..."),await chrome.scripting.executeScript({target:{tabId:s.id},files:["content.js"]}),await chrome.scripting.insertCSS({target:{tabId:s.id},files:["content.css"]}),await new Promise(l=>setTimeout(l,100)),await chrome.tabs.sendMessage(s.id,{type:"OPEN_CHAT",sessionId:o})}window.close()}catch(e){console.error("打开聊天窗口失败:",e),alert("打开聊天窗口失败，请刷新页面后重试")}},c=async()=>{var i;try{const e=await chrome.runtime.sendMessage({type:"GET_SESSIONS"});let o=1;if(e!=null&&e.success&&((i=e.data)==null?void 0:i.length)>0)o=e.data[0].id;else{const a=await chrome.runtime.sendMessage({type:"CREATE_SESSION",payload:{title:`新对话 ${new Date().toLocaleString("zh-CN")}`}});a!=null&&a.success&&(o=a.data.id)}const s=chrome.runtime.getURL(`chat.html?sessionId=${o}`);await chrome.tabs.create({url:s}),window.close()}catch(e){console.error("全屏打开失败:",e),alert("全屏打开失败，请重试")}},n=()=>{chrome.runtime.openOptionsPage()};return(i,e)=>(p(),h("div",w,[e[5]||(e[5]=d('<div class="header" data-v-1b2ed153><div class="header-content" data-v-1b2ed153><div class="logo" data-v-1b2ed153><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" data-v-1b2ed153><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-1b2ed153></path></svg></div><div class="header-text" data-v-1b2ed153><h2 data-v-1b2ed153>AI Chat Assistant</h2><p data-v-1b2ed153>智能对话助手</p></div></div></div>',1)),t("div",k,[t("div",{class:"actions-section"},[t("button",{class:"action-btn primary",onClick:r},[...e[0]||(e[0]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[t("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),t("span",null,"打开聊天窗口（内嵌）",-1)])]),t("button",{class:"action-btn secondary",onClick:c},[...e[1]||(e[1]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[t("path",{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),t("span",null,"全屏打开",-1)])]),t("button",{class:"action-btn secondary",onClick:n},[...e[2]||(e[2]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[t("circle",{cx:"12",cy:"12",r:"3","stroke-width":"2"}),t("path",{d:"M12 1v6m0 6v6M1 12h6m6 0h6","stroke-width":"2","stroke-linecap":"round"})],-1),t("span",null,"设置与管理",-1)])])]),e[4]||(e[4]=d('<div class="divider" data-v-1b2ed153></div><div class="info-section" data-v-1b2ed153><div class="info-item" data-v-1b2ed153><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" data-v-1b2ed153><circle cx="12" cy="12" r="10" stroke-width="2" data-v-1b2ed153></circle><line x1="12" y1="16" x2="12" y2="12" stroke-width="2" stroke-linecap="round" data-v-1b2ed153></line><line x1="12" y1="8" x2="12.01" y2="8" stroke-width="2" stroke-linecap="round" data-v-1b2ed153></line></svg><div class="info-text" data-v-1b2ed153><div class="info-title" data-v-1b2ed153>使用提示</div><div class="info-desc" data-v-1b2ed153>内嵌模式：固定在页面右侧<br data-v-1b2ed153>全屏模式：在新标签页打开</div></div></div></div><div class="divider" data-v-1b2ed153></div>',3)),t("div",f,[e[3]||(e[3]=t("div",{class:"version"},"v1.0.0",-1)),t("a",{href:"#",onClick:u(n,["prevent"]),class:"footer-link"},"帮助文档")])])]))}}),y=b(g,[["__scopeId","data-v-1b2ed153"]]);m(y).mount("#app");
